{"version":3,"sources":["index.tsx"],"names":["remoteParams","fetched","Streamlit","events","addEventListener","RENDER_EVENT","event","data","detail","firebaseConfig","args","userId","app","initializeApp","remoteConfig","getRemoteConfig","settings","minimumFetchIntervalMillis","analytics","getAnalytics","setUserId","fetchAndActivate","then","activated","getAll","remoteFlags","setComponentValue","catch","error","console","setComponentReady","setFrameHeight"],"mappings":"iLAAA,2CAMIA,EAAe,GACfC,GAAU,EAwCdC,IAAUC,OAAOC,iBAAiBF,IAAUG,cAtC5C,SAAkBC,GACf,IAAIL,EAAQ,CACX,IAAMM,EAAQD,EAAkCE,OAC5CC,EAAiBF,EAAKG,KAAL,OACjBC,EAASJ,EAAKG,KAAL,OAGPE,EAAMC,YAAcJ,GACpBK,EAAeC,YAAgBH,GACrCE,EAAaE,SAASC,2BAA6B,KACnD,IAAMC,EAAYC,YAAaP,GAE5BD,GAAUO,GACXE,YAAUF,EAAWP,GAMvBU,YAAiBP,GACbQ,MAAK,SAAAC,GAEH,OAAOC,YAAOV,MAEhBQ,MAAK,SAAAG,GACJzB,EAAeyB,EAEfxB,GAAU,EACVC,IAAUwB,kBAAkB1B,MAG9B2B,OAAM,SAAAC,GAAK,OAAIC,QAAQD,MAAMA,UAQpC1B,IAAU4B,oBAEV5B,IAAU6B,mB","file":"static/js/main.f7702fa8.chunk.js","sourcesContent":["import { Streamlit, RenderData } from \"streamlit-component-lib\"\n\nimport { initializeApp } from \"firebase/app\";\nimport { getRemoteConfig, fetchAndActivate, getAll } from \"firebase/remote-config\";\nimport { getAnalytics, setUserId} from \"firebase/analytics\";\n\nlet remoteParams = {};\nlet fetched = false;\n\nfunction onRender(event: Event): void {\n   if(!fetched){\n    const data = (event as CustomEvent<RenderData>).detail\n    let firebaseConfig = data.args[\"config\"]\n    let userId = data.args[\"userId\"]\n\n    //console.log(firebaseConfig);\n    const app = initializeApp(firebaseConfig);\n    const remoteConfig = getRemoteConfig(app);\n    remoteConfig.settings.minimumFetchIntervalMillis = 15000;\n    const analytics = getAnalytics(app);\n\n    if(userId && analytics){\n      setUserId(analytics, userId);\n      //console.log(\"Set user id to \" + userId);\n   }\n\n  \n    //console.log('fetched', fetched);\n    fetchAndActivate(remoteConfig)\n       .then(activated => {\n          //if (!activated) console.log('not activated');\n          return getAll(remoteConfig);\n       })\n       .then(remoteFlags => {\n         remoteParams = remoteFlags;\n         //console.log(\"rm\", JSON.stringify(remoteParams));\n         fetched = true;\n         Streamlit.setComponentValue(remoteParams);\n\n      })\n      .catch(error => console.error(error));\n    }\n\n\n  //Streamlit.setComponentValue(firebase)\n}\n\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender)\nStreamlit.setComponentReady()\n\nStreamlit.setFrameHeight()\n"],"sourceRoot":""}