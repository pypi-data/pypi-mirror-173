(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6355:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(88)}])},88:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return s},__next_rsc__:function(){return r},default:function(){return i}}),Promise.resolve().then(t.bind(t,3340)),Promise.resolve().then(t.bind(t,9025)),Promise.resolve().then(t.bind(t,6295)),Promise.resolve().then(t.bind(t,4958)),Promise.resolve().then(t.bind(t,5029)),Promise.resolve().then(t.bind(t,1830)),Promise.resolve().then(t.bind(t,3930)),Promise.resolve().then(t.bind(t,9378)),Promise.resolve().then(t.bind(t,1437)),Promise.resolve().then(t.bind(t,4980)),Promise.resolve().then(t.bind(t,9933)),Promise.resolve().then(t.bind(t,7259)),Promise.resolve().then(t.bind(t,3682)),Promise.resolve().then(t.bind(t,8087)),Promise.resolve().then(t.bind(t,4731)),Promise.resolve().then(t.bind(t,4665)),Promise.resolve().then(t.t.bind(t,5675,23)),Promise.resolve().then(t.bind(t,7926)),Promise.resolve().then(t.bind(t,1918)),Promise.resolve().then(t.bind(t,7432)),Promise.resolve().then(t.bind(t,1925)),Promise.resolve().then(t.bind(t,4661));const r={server:!1,__webpack_require__:t};function i(){}const s=!0},4731:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7171),s=t(9628);n.default=function(e){var n=e.value;return null===n?(0,r.jsx)(r.Fragment,{children:"None"}):1===n?(0,r.jsx)(i.Z,{}):(0,r.jsx)(s.Z,{})}},1925:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(7294),a=t(1663),l=t(1626),c=s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(0,o.useState)(null),i=t[0],s=(t[1],(0,l.Z)(n)),d=(0,o.useMemo)((function(){if(null===s||void 0===s?void 0:s.values)return Object.keys(s.values).sort().reduce((function(e,n){return e[n]=s.values[n],e}),{})}),[s]),u=(0,o.useMemo)((function(){if(d)return[{type:"bar",orientation:"h",x:Object.values(d),y:Object.keys(d),text:Object.keys(d).map((function(e){return"".concat(s.column,": ").concat(e," ").concat(s.message||"")})),marker:{color:Object.keys(d).map(a.Lq)}}]}),[d]),h=(0,o.useMemo)((function(){return{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0,type:"category"}}}),[i]);return"verbatim"===(null===s||void 0===s?void 0:s.type)?(0,r.jsx)("div",{className:"cell-verbatim",children:s.value}):(0,r.jsx)(c,{style:{height:"100%",width:"100%",maxHeight:"110px"},data:u,layout:h,config:{displayModeBar:!1}})}},4661:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(7294),a=t(1663),l=t(1626),c=(t(3682),s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1}));n.default=function(e){var n=e.value,t=(0,o.useState)(null),i=(t[0],t[1]),s=(0,l.Z)(n);(0,o.useLayoutEffect)((function(){var e=window.visualViewport;(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&i({height:e.height,width:e.width})}),[]);var d=(0,o.useMemo)((function(){if(null===s||void 0===s?void 0:s.values)return Object.keys(s.values).sort().reduce((function(e,n){return e[n]=s.values[n],e}),{})}),[s]),u=(0,o.useMemo)((function(){if(d)return[{type:"bar",orientation:"h",x:Object.values(d),y:Object.keys(d),text:Object.keys(d).map((function(e){return"".concat(s.column,": ").concat(e," ").concat(s.message||"")})),marker:{color:Object.keys(d).map(a.Lq)}}]}),[d]),h=(0,o.useMemo)((function(){return{autosize:!0,title:"".concat(null===n||void 0===n?void 0:n.columnName),font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{type:"category"}}}),[n]);return"verbatim"===(null===s||void 0===s?void 0:s.type)?(0,r.jsx)("div",{className:"cell-verbatim-expanded",children:s.value}):(0,r.jsx)("div",{style:{minWidth:"500px"},children:(0,r.jsx)(c,{style:{height:"100%",width:"100%"},data:u,layout:h,config:{displayModeBar:!1}})})}},3682:function(e,n,t){"use strict";t.r(n),t.d(n,{ConfigContext:function(){return i}});var r=t(5893),i=(0,t(7294).createContext)({apiUrl:null,otherUrl:null,apiProxyUrl:null,isIframe:!1});n.default=function(e){var n=e.apiUrl,t=e.otherUrl,s=e.apiProxyUrl,o=e.inColab,a=e.children;return(0,r.jsx)(i.Provider,{value:{apiUrl:n,otherUrl:t,apiProxyUrl:s,isIframe:o},children:a})}},8087:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=(t(7294),s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1}));n.default=function(e){var n=e.chartData,t=e.layout;return(0,r.jsx)(o,{data:n,layout:t,config:{displayModeBar:!1}})}},7259:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(4980);n.default=function(e){var n=e.children;return(0,r.jsx)("div",{className:"expand-overlay",children:(0,r.jsx)(i.default,{children:n})})}},7926:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(7294),a=t(1763),l=t(1663),c=t(3682),d=t(6024),u=s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(e.dgid,(0,o.useContext)(c.ConfigContext),(0,d.Z)(n)),i=(0,o.useMemo)((function(){var e;return t?[{type:"bar",x:"DATETIME"===t.columnType?t.labels.map((function(e){return(0,a.Z)(e,"DATETIME")})):t.labels,y:t.bins,text:null===t||void 0===t||null===(e=t.labels)||void 0===e?void 0:e.map((function(e){return"".concat(t.column,": ").concat((0,a.Z)(e,t.columnType)," ").concat(t.message||"")})),marker:{color:(0,l.Lq)(t.column)}}]:null}),[t]),s=(0,o.useMemo)((function(){return{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0}}}),[]),h=(0,o.useMemo)((function(){return{displayModeBar:!1}}));return"verbatim"===(null===t||void 0===t?void 0:t.type)?(0,r.jsx)("div",{className:"cell-verbatim",children:t.value}):(0,r.jsx)(u,{style:{height:"100%",width:"100%",maxHeight:"110px"},data:i,layout:s,config:h})}},7432:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(7294),a=t(1763),l=t(2825),c=t(1663),d=t(3682),u=t(6024),h=s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(e.dgid,(0,o.useContext)(d.ConfigContext)),i=(0,u.Z)(n),s=(0,o.useMemo)((function(){var e;return i?[{type:"bar",x:"DATETIME"===i.columnType?i.labels.map((function(e){return(0,a.Z)(e,"DATETIME")})):i.labels,y:i.bins,text:null===i||void 0===i||null===(e=i.labels)||void 0===e?void 0:e.map((function(e){return"".concat(i.column,": ").concat((0,a.Z)(e,i.columnType)," ").concat(i.message||"")})),marker:{color:(0,c.Lq)(i.column)}}]:null}),[i]),f=(0,o.useMemo)((function(){return(null===i||void 0===i?void 0:i.statistics)?(e=i.statistics)?(0,r.jsx)("div",{style:{margin:"auto",marginLeft:"inherit"},children:Object.keys(e).map((function(n,i){return(0,r.jsxs)("ul",{style:{paddingLeft:"0"},children:[(0,r.jsx)("b",{children:n})," :"," ",(0,l.Z)(e[n],3).toLocaleString(t.locale)]})}))}):(0,r.jsx)("div",{}):(0,r.jsx)("div",{});var e}),[i]),v=(0,o.useMemo)((function(){return{autosize:!0,title:"".concat(null===i||void 0===i?void 0:i.column),font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{font:{size:13,color:"#3D4355"}}}}),[i]),m=(0,o.useMemo)((function(){return{displayModeBar:!1}}));return"verbatim"===(null===i||void 0===i?void 0:i.type)?(0,r.jsx)("div",{className:"cell-verbatim-expanded",children:i.value}):(0,r.jsxs)("div",{style:{minWidth:"600px",display:"flex"},children:[(0,r.jsx)(h,{style:{height:"100%",width:"75%"},data:s,layout:v,config:m}),f]})}},4665:function(e,n,t){"use strict";t.r(n),t.d(n,{CanvasContext:function(){return S},default:function(){return I}});var r=t(7568),i=t(872),s=t(1799),o=t(9396),a=t(828),l=t(9815),c=t(4051),d=t.n(c),u=t(5893),h=t(7294),f=(t(5152),t(7650)),v=t(4697),m=t(3682),x=t(1663),j=function(e){var n=e.label,t=e.hidden,r=e.addLabel,i=e.removeLabel,s=(0,h.useMemo)((function(){return t?"badge badge-label badge-disabled":"badge badge-label"}),[t]),o=(0,h.useMemo)((function(){return(0,x.Lq)(n)}),[n]),a=(0,h.useMemo)((function(){return(0,x.Qg)((0,x.Lq)(n))}),[n]),l=(0,h.useRef)(),c=(0,h.useCallback)((function(){r&&i&&(t?r(n):i(n))}),[t,n,r,i]);return(0,u.jsx)("div",{ref:l,className:s,style:{backgroundColor:o,color:a},onClick:c,children:"".concat(n)})},g=t(4980),p=t(8456),b=t(9534),y=t(7632),N=function(e,n){var t=(0,h.useContext)(m.ConfigContext),r=t.isIframe,i=t.apiUrl,s=(0,h.useState)(),o=s[0],a=s[1],l=(0,h.useRef)(!1),c=(0,h.useMemo)((function(){return(0,y.Z)()}),[]);return console.log("api url: ".concat(i)),(0,h.useEffect)((function(){r&&!l.current&&c&&(window.addEventListener("message",(function(e){var n=e.data,t=n.messageType,r=n.targetId,i=(0,b.Z)(n,["messageType","targetId"]);"metadata"===t&&r===c&&a(i)}),!1),l.current=!0),r&&c?n&&e&&window.parent.postMessage({dgid:e,assetId:n,targetId:c,type:"metadata"},"*"):r||fetch("/api/metadata?".concat(new URLSearchParams({assetId:n||new URL(url).searchParams.get("assetId"),dgid:e,url:"".concat(i,"asset-metadata")}))).then((function(e){return e.json()})).then((function(e){return a(JSON.parse(e))}))}),[e,n,c]),o},w=function(e){var n=(0,h.useContext)(m.ConfigContext),t=n.isIframe,r=(n.apiUrl,(0,h.useState)()),i=r[0],s=r[1],o=(0,h.useRef)(!1),a=(0,h.useMemo)((function(){return(0,y.Z)()}),[]),l=(0,h.useMemo)((function(){var n=new URL(e).searchParams;return{dgid:n.get("dgid"),assetId:n.get("assetId")}}),[e]),c=l.dgid,d=l.assetId;return(0,h.useEffect)((function(){t&&!o.current&&a&&(window.addEventListener("message",(function(e){var n=e.data,t=n.messageType,r=n.targetId,i=(0,b.Z)(n,["messageType","targetId"]);"asset"===t&&r===a&&s("data:image/png;base64,".concat(i.src))}),!1),o.current=!0),t?d&&c&&a&&window.parent.postMessage({dgid:c,assetId:d,targetId:a,type:"asset"},"*"):s(e)}),[e,d,c,t,a]),i},C=function(e){var n=e.url,t=e.drawImage,r=e.dgid,i=e.scoreBound,s=e.ref,o=(0,h.useRef)(),a=(0,h.useRef)(),l=(0,h.useState)([]),c=l[0],d=l[1],f=(0,h.useMemo)((function(){return new URL(n).searchParams.get("assetId")}),[n]),v=((0,h.useContext)(m.ConfigContext),N(r,f)),x=w(n);(0,h.useEffect)((function(){var e;if(i&&(null===v||void 0===v?void 0:v.overlays)){var n=null===v||void 0===v||null===(e=v.overlays)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.score)<i}));d(n.map((function(e){return e.label})))}}),[v,i]);var j=(0,h.useCallback)((function(){o&&a&&v&&t(o,a,v,c)}),[t,v,c]);return(0,h.useEffect)((function(){j()}),[j]),(0,u.jsxs)("div",{className:"canvas-container",ref:s,children:[(0,u.jsx)("canvas",{ref:o,className:"image-canvas"}),(0,u.jsx)("img",{ref:a,src:x,crossOrigin:"Anonymous",style:{display:"none"},onLoad:j,alt:"DataGrid Image"})]})},Z=function(e){var n=e.url,t=e.drawImage,r=e.dgid,i=e.scoreBound,s=(0,f.YD)({threshold:0,rootMargin:"1000px",triggerOnce:!0}),o=s.ref,a=s.inView,l=(s.entry,(0,h.useRef)());return(0,u.jsxs)("div",{ref:o,children:[a&&(0,u.jsx)("div",{ref:l,children:(0,u.jsx)(C,{url:n,drawImage:t,dgid:r,scoreBound:i})}),!a&&(0,u.jsx)(p.Z,{})]})},S=(0,h.createContext)(),k=function(e){var n=e.urls,t=e.url,r=(e.isMulti,e.strValue),i=e.drawImage,s=e.assetId,o=e.dgid,a=e.filterLabels,l=e.scoreBound,c=(0,f.YD)({threshold:0,rootMargin:"10000px"}),d=c.ref,m=c.inView,x=(c.entry,(0,v.y1)((function(){b(Math.min(p+100,null===n||void 0===n?void 0:n.length))}),250));(0,h.useEffect)((function(){m&&x()}),[m,x]);var j=(0,h.useState)(100),p=j[0],b=j[1];return(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"image-title",children:r}),n?(0,u.jsxs)("div",{className:"canvas-grid",children:[n.slice(0,p).map((function(e,n){return(0,u.jsx)(g.default,{tabIndex:n,toggleElement:(0,u.jsx)(Z,{url:e,drawImage:i,assetId:s,dgid:o,filterLabels:a,scoreBound:l,index:n}),children:(0,u.jsx)(M,{url:e,dgid:o,assetId:s})},e)})),(0,u.jsx)("div",{style:{width:"100%"},ref:d})]}):(0,u.jsx)(C,{url:t,drawImage:i,assetId:s,dgid:o,scoreBound:l})]})};var P=function(e){var n=e.label,t=e.children,r=(0,h.useState)(!1),i=r[0],s=r[1],o=(0,h.useCallback)((function(){s(!i)}),[i]);return(0,u.jsxs)("div",{className:"accordion",children:[(0,u.jsxs)("div",{className:"accordion-label",onClick:o,children:[(0,u.jsx)("div",{className:"arrow"}),n]}),(0,u.jsx)("div",{className:"accordion-content ".concat(i?"active":""),children:t})]})},M=function(e){var n=e.url,t=e.metadata,c=e.dgid,f=e.assetId,v=e.urls,g=(0,h.useContext)(m.ConfigContext),p=(0,h.useState)()[0],b=(0,h.useState)(!0),y=b[0],N=b[1],w=(0,h.useState)(!1),C=w[0],Z=w[1],S=(0,h.useState)(!1)[0],M=(0,h.useState)(1)[0],I=(0,h.useState)(1)[0],E=(0,h.useState)(),O=E[0],_=E[1],A=(0,h.useState)({min:0,max:1}),R=A[0],T=A[1],D=(0,h.useState)(),L=D[0],q=D[1],B=(0,h.useState)(new Set),G=B[0],U=B[1],z=(0,h.useState)(1),F=z[0],Y=z[1],V=(0,h.useMemo)((function(){return!!(null===v||void 0===v?void 0:v.length)}),[v]),K=(0,h.useRef)(),H=(0,h.useCallback)((0,r.Z)(d().mark((function e(){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/metadata?".concat(new URLSearchParams({assetId:f||new URL(n).searchParams.get("assetId"),dgid:c,url:"../4001/asset-metadata"}).toString()));case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,_(JSON.parse(i));case 9:case"end":return e.stop()}}),e)}))),[null===g||void 0===g?void 0:g.apiProxyUrl,f,c,t,n]);(0,h.useEffect)((function(){if(t){var e=JSON.parse(t);e&&_(e)}else H()}),[t,H]);var J=(0,h.useCallback)((function(e){N(!e.target.checked)}),[]),W=(0,h.useCallback)((function(e){Z(e.target.checked)}),[]),X=(0,h.useCallback)((function(e){Y(e.target.value)}),[]),Q=(0,h.useCallback)((function(e){q(e.target.value)}),[]);(0,h.useEffect)((function(){K.current.min=R.min,K.current.max=R.max}),[R]);var $=(0,h.useCallback)((function(e){var n=new Set(G);null===e||void 0===e||e.forEach((function(e){n.has(e)||n.add(e)})),U(n)}),[G]),ee=(0,h.useCallback)((function(e,n,t,r){if(t){var i=e.current.getContext("2d"),l=function(e,n,t,r){return t>r?t<e?Math.max(t/e,e/t):Math.min(t/e,e/t):r<n?Math.max(r/n,n/r):Math.min(r/n,n/r)}(400*F,400*F,n.current.naturalWidth,n.current.naturalHeight);if(e.current.width=n.current.naturalWidth*l,e.current.height=n.current.naturalHeight*l,i.clearRect(0,0,e.current.width,e.current.height),i.globalAlpha=M,p&&(i.drawImage(p,0,0,n.current.width*l,n.current.height*l),i.globalCompositeOperation="source-in"),i.imageSmoothingEnabled=y,i.drawImage(n.current,0,0,n.current.width*l,n.current.height*l),C){for(var c=i.getImageData(0,0,e.current.width,e.current.height),d=c.data,u=0;u<d.length;u+=4){var h=(d[u]+d[u+1]+d[u+2])/3;d[u]=h,d[u+1]=h,d[u+2]=h}i.putImageData(c,0,0)}if(S){for(var f=i.getImageData(0,0,e.current.width,e.current.height),v=f.data,m=0;m<v.length;m+=4)v[m]=255-v[m],v[m+1]=255-v[m+1],v[m+2]=255-v[m+2];i.putImageData(f,0,0)}if(null===t||void 0===t?void 0:t.overlays){i.globalAlpha=I;for(var j=0;j<(null===t||void 0===t?void 0:t.overlays.length);j++){var g,b;if(!r.includes(null===(g=t.overlays[j])||void 0===g?void 0:g.label)){if(null===(b=t.overlays[j])||void 0===b?void 0:b.score){var N=t.overlays[j].score;R.min>N&&T((0,o.Z)((0,s.Z)({},R),{min:N})),R.max<N&&T((0,o.Z)((0,s.Z)({},R),{max:N})),!V&&L>N&&te(t.overlays[j].label)}if("regions"===(null===t||void 0===t?void 0:t.overlays[j].type)){var w=null===t||void 0===t?void 0:t.overlays[j].data;if(!G.has(null===t||void 0===t?void 0:t.overlays[j].label))for(var Z=0;Z<w.length;Z++){var k=w[Z];i.fillStyle=(0,x.Lq)(null===t||void 0===t?void 0:t.overlays[j].label),i.beginPath(),i.moveTo(k[0]*l,k[1]*l);for(var P=2;P<k.length;P+=2)i.lineTo(k[P]*l,k[P+1]*l);i.closePath(),i.fill()}}else if("boxes"===(null===t||void 0===t?void 0:t.overlays[j].type)){var E=null===t||void 0===t?void 0:t.overlays[j].data;if(!G.has(null===t||void 0===t?void 0:t.overlays[j].label))for(var O=0;O<E.length;O++){var _=(0,a.Z)(E[O],2),A=(0,a.Z)(_[0],2),D=A[0],q=A[1],B=(0,a.Z)(_[1],2),U=B[0],z=B[1];i.strokeStyle=(0,x.Lq)(null===t||void 0===t?void 0:t.overlays[j].label),i.lineWidth=3,i.beginPath(),i.moveTo(D*l,q*l),i.lineTo(U*l,q*l),i.lineTo(U*l,z*l),i.lineTo(D*l,z*l),i.closePath(),i.stroke()}}else null===t||void 0===t||t.overlays[j].type}}}}}),[p,C,S,F,G,y,te,L,400,400,M,V,I,R]),ne=(0,h.useCallback)((function(e){var n=new Set(G);n.has(e)&&n.delete(e),U(n)}),[G]),te=(0,h.useCallback)((function(e){var n=new Set(G);n.has(e)||n.add(e),U(n)}),[G]),re=(0,h.useMemo)((function(){return(null===O||void 0===O?void 0:O.labels)?Array.isArray(null===O||void 0===O?void 0:O.labels)?null===O||void 0===O?void 0:O.labels.sort():Object.keys(null===O||void 0===O?void 0:O.labels).sort():null}),[O]),ie=(0,h.useMemo)((function(){return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.filename)||f}),[t,f]),se=(0,h.useMemo)((function(){return!O||V?null:(null===O||void 0===O?void 0:O.overlays)?(0,i.Z)({},O):O}),[O,V]);return(0,h.useEffect)((function(){if((null===O||void 0===O?void 0:O.overlays)&&L){var e=new Set(G),n=!0,t=!1,r=void 0;try{for(var i,s=((null===O||void 0===O?void 0:O.overlays)||{})[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;(null===o||void 0===o?void 0:o.score)&&((null===o||void 0===o?void 0:o.score)<=L&&e.add(null===o||void 0===o?void 0:o.label),(null===o||void 0===o?void 0:o.score)>L&&e.has(null===o||void 0===o?void 0:o.label)&&e.delete(null===o||void 0===o?void 0:o.label))}}catch(a){t=!0,r=a}finally{try{n||null==s.return||s.return()}finally{if(t)throw r}}G.size===e.size&&(0,l.Z)(G).every((function(n){return e.has(n)}))||U(e)}}),[O,L,G]),(0,u.jsxs)("div",{className:"editor-container",children:[(0,u.jsxs)("div",{className:"left-column",children:[(0,u.jsxs)("div",{className:"image-controls",children:[(0,u.jsxs)("div",{className:"checkbox",children:[(0,u.jsx)("input",{type:"checkbox",className:"image-smoothing-checkbox",id:"image-smoothing",onChange:J}),(0,u.jsx)("label",{htmlFor:"image-smoothing",className:"checkbox-label",children:"Pixelated"})]}),(0,u.jsxs)("div",{className:"checkbox",children:[(0,u.jsx)("input",{type:"checkbox",className:"grayscale-checkbox",id:"grayscale",onChange:W}),(0,u.jsx)("label",{htmlFor:"grayscale",className:"checkbox-label",children:"Grayscale"})]}),!V&&(0,u.jsxs)("div",{className:"slider-container",children:[(0,u.jsx)("div",{className:"zoom-label",children:"Zoom:"}),(0,u.jsx)("input",{type:"range",min:"1",max:"5",defaultValue:"".concat(F),className:"zoom-slider",id:"zoom-slide",onChange:X,step:"0.01"})]})]}),se&&(0,u.jsx)("div",{className:"metadata-control",children:(0,u.jsx)(P,{label:"Metadata",children:(0,u.jsx)("pre",{children:(0,u.jsx)("code",{children:JSON.stringify(se,null,4)})})})}),(0,u.jsx)("div",{className:"score-control",children:(0,u.jsxs)("div",{className:"slider-container",children:[(0,u.jsx)("div",{className:"zoom-label",children:"Score:"}),(0,u.jsx)("input",{type:"range",ref:K,min:"0",max:"1",defaultValue:"0",className:"zoom-slider",id:"zoom-slide",step:"0.001",onChange:Q})]})}),(0,u.jsx)("div",{className:"labels-container",children:!!re&&re.map((function(e){return(0,u.jsx)(j,{label:e,hidden:G.has(e),addLabel:ne,removeLabel:te})}))})]}),(0,u.jsx)("div",{className:"right-column ".concat(V&&"multi-canvas"),children:(0,u.jsx)(k,{urls:v,url:n,dgid:c,assetId:f,isMulti:V,drawImage:ee,filterLabels:$,scoreBound:L,strValue:ie})})]})},I=M},1918:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7650);n.default=function(e){var n=e.children,t=(0,i.YD)({threshold:0,rootMargin:"1000px"}),s=t.ref,o=t.inView;t.entry;return(0,r.jsx)("div",{ref:s,children:o&&n})}},4980:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),s=t(8262);n.default=function(e){var n=e.toggleElement,t=e.children,o=e.sx,a=e.tabIndex,l=e.fullScreen,c=void 0!==l&&l,d=(0,i.useState)(!1),u=d[0],h=d[1],f=(0,i.useCallback)((function(){return h(!u)}),[u]),v=(0,i.useCallback)((function(){u||h(!0)}),[u]);return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{tabIndex:a,onClick:v,children:n}),(0,r.jsx)(s.Z,{open:u,fullScreen:c,onClose:f,sx:o,children:t})]}):(0,r.jsx)("div",{onClick:v,style:{height:"100%",width:"100%",opacity:"0",cursor:"pointer"},tabIndex:a,children:(0,r.jsx)(s.Z,{open:u,fullScreen:c,onClose:f,sx:o,children:t})})}},1437:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(1799),i=t(9396),s=t(9534),o=t(5893),a=t(7294),l=t(5152),c=t.n(l),d=t(7625),u=t(5503),h=t(813),f=t(828),v=t(9815),m=t(883),x=t(1590),j=t(887),g=t(2339),p=t(5587),b=t(4285),y=function(e){var n=(0,i.Z)((0,r.Z)({},e.innerProps),{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}}),t=(0,p.nB)({id:e.data.id}),s=t.attributes,a=t.listeners,l=t.setNodeRef,c=t.transform,d=t.transition,u={transform:b.ux.Transform.toString(c),transition:d};return(0,o.jsx)("div",(0,i.Z)((0,r.Z)({style:u,ref:l},s,a),{children:(0,o.jsx)(x.c.MultiValue,(0,i.Z)((0,r.Z)({},e),{innerProps:n}))}))},N=function(e){var n=(0,j.Zj)({id:"droppable"}),t=n.isOver,i=n.setNodeRef,s={color:t?"green":void 0};return(0,o.jsx)("div",{style:s,ref:i,children:(0,o.jsx)(x.c.MultiValueContainer,(0,r.Z)({},e))})},w=function(e){return(0,o.jsx)(x.c.MultiValueRemove,(0,i.Z)((0,r.Z)({},e),{innerProps:(0,r.Z)({onPointerDown:function(e){return e.stopPropagation()}},e.innerProps)}))},C=function(e){return(0,o.jsx)(x.c.Menu,(0,r.Z)({className:"react-select-list"},e))},Z=function(e){var n=e.options,t=e.update,s=e.defaults,l=(0,f.Z)(a.useState(n),2),c=l[0],d=l[1],u=(0,a.useCallback)((function(){return t(c)}),[c]),h={valueContainer:function(e,n){return(0,i.Z)((0,r.Z)({},e),{overflow:"auto"})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(j.LB,{modifiers:[g.F4],onDragEnd:function(e){var n=e.active,t=e.over;n&&t&&d((function(e){var r=e.findIndex((function(e){return e.id===n.id})),i=e.findIndex((function(e){return e.id===t.id}));return(0,p.Rp)(e,r,i)}))},children:(0,o.jsx)(p.Fo,{items:c,strategy:p.PG,children:(0,o.jsx)(m.default,{styles:h,distance:4,isMulti:!0,options:s,value:c,onChange:function(e){return d((0,v.Z)(e))},components:{MultiValue:y,MultiValueContainer:N,MultiValueRemove:w,Menu:C},closeMenuOnSelect:!1})})}),(0,o.jsx)("button",{onClick:u,children:"Save Changes"})]})},S=t(4199),k=c()((function(){return Promise.resolve().then(t.bind(t,883))}),{ssr:!1}),P=function(e){var n=e.toggle,t=e.sortDesc;return(0,o.jsxs)("div",{className:"arrow-toggle",onClick:n,children:[t&&(0,o.jsx)(u.Z,{}),!t&&(0,o.jsx)(h.Z,{})]})},M=function(e){var n=e.columns,t=e.query,l=e.defaultOptions,c=e.subtree,u=void 0===c?"":c,h=e.isMulti,f=void 0!==h&&h,v=e.subtrees,m=void 0===v?[]:v,x=(0,d.unstable_useRefreshRoot)(),j=(0,a.useState)(!1),g=(j[0],j[1],(0,a.useState)(null)),p=(g[0],g[1],(0,a.useState)(!1)),b=(p[0],p[1],(0,a.useState)(!1)),y=b[0],N=(b[1],(0,a.useMemo)((function(){return n.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[n])),w=(0,a.useMemo)((function(){return null===l||void 0===l?void 0:l.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[l]),C=(0,a.useMemo)((function(){var e=t[u]||t[m[0]];return N.find((function(n){return n.value===e}))||null}),[N,t]),M=(0,a.useCallback)((function(e){var n=e.map((function(e){return e.value}));x({query:(0,S.Z)(t,"",{select:n})})}),[t]),I=(0,a.useCallback)((function(e){var n=e.value;if(m.length){var o=(0,i.Z)((0,r.Z)({},t),{sortDesc:y}),a=!0,l=!1,c=void 0;try{for(var d,h=m[Symbol.iterator]();!(a=(d=h.next()).done);a=!0){var f=d.value;o=(0,S.Z)(o,f,n)}}catch(g){l=!0,c=g}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}if(null===o||void 0===o?void 0:o.groupBy){o.limit,o.offset;var v=(0,s.Z)(o,["limit","offset"]);o=(0,i.Z)((0,r.Z)({},v),{limit:4})}else{o.limit,o.offset;var j=(0,s.Z)(o,["limit","offset"]);o=(0,i.Z)((0,r.Z)({},j),{limit:10})}x({query:o})}else x({query:(0,S.Z)(t,u,n)})}),[m,u,t,y]),E=(0,a.useCallback)((function(){var e=(0,r.Z)({},t);if("groupBy"===u||"groupBy"==m[0]){e.groupBy,e.sortBy;var n=(0,s.Z)(e,["groupBy","sortBy"]);e=(0,i.Z)((0,r.Z)({},n),{limit:10})}else if("sortBy"===u||"sortBy"==m[0]){e.sortBy;e=(0,s.Z)(e,["sortBy"])}x({query:e})}),[t,u,m]),O=(0,a.useCallback)((function(){x({query:(0,i.Z)((0,r.Z)({},t),{sortDesc:!(null===t||void 0===t?void 0:t.sortDesc)})})}),[t]);return f?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"alert",children:"You can drag and drop columns to sort them in the DataGrid"}),(0,o.jsx)(Z,{options:N,update:M,defaults:w})]}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"select-modal-title",children:[(0,o.jsxs)("div",{children:["Select a column ",!!(null===t||void 0===t?void 0:t.sortBy)&&(0,o.jsx)(P,{toggle:O,sortDesc:null===t||void 0===t?void 0:t.sortDesc})]}),(0,o.jsx)("div",{className:"reset-button ".concat(C?"enabled":"disabled"),onClick:E,children:"Reset to default"})]}),(0,o.jsx)("div",{className:"select-modal-body",children:(0,o.jsx)(k,{options:N,value:C,onChange:I})})]})}},1830:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var r=t(1799),i=t(9396),s=t(5893),o=t(7625),a=t(2349),l=t(7294),c=t(4980),d=function(){return(0,s.jsxs)("div",{className:"markdown-body",children:[(0,s.jsxs)("p",{dir:"auto",children:[(0,s.jsx)("b",{children:"DataGrid filter expressions"})," use Python syntax for selecting matching rows. To use the value of a column in the expression, enclosing the column name like ",(0,s.jsx)("code",{children:'{"Column Name"}'}),". Some examples:"]}),(0,s.jsx)("p",{dir:"auto",children:'To select all of the rows that have a fitness score less than 0.1, given that you have a column named "Fitness":'}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"fitness"} < 0.1'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:'Note that the column name is case-insensitive (i.e., you can use any case of letters inside quotes). Column values can be used any where in the filter expression. For example, if you wanted to select all of the rows where column "Score 1" was greater than or equal to "Score 2", you would write:'}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"score 1"} >= {"score 2"}'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:"You can use any of Python's operators, including:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"<"})," - less than"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"<="})," - less than or equal"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:">"})," - greater than"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:">="})," - greater than or equal"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"=="})," - equal to"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"!="})," - not equal to"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"is"})," - is the same (e.g., ",(0,s.jsx)("code",{children:"is None"}),")"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"is not"})," - is not the same (e.g."," ",(0,s.jsx)("code",{children:"is not None"}),")"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"+"})," - addition"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"-"})," - subtraction"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"*"})," - multiplication"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"/"})," - division"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"//"})," - integer division"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"**"})," - raise to a power"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"not"})," - flip the boolean value"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"in"})," - is value in a list of values"]})]}),(0,s.jsxs)("p",{dir:"auto",children:["Use ",(0,s.jsx)("code",{children:"is None"})," and ",(0,s.jsx)("code",{children:"is not None"})," for selecting rows that have null values. Otherwise, null values are ignored in most other uses."]}),(0,s.jsxs)("p",{dir:"auto",children:["You can combine comparisons using Python's ",(0,s.jsx)("code",{children:"and"})," and"," ",(0,s.jsx)("code",{children:"or"})," (use parentheses to force evaluation order different from Python's defaults):"]}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'(({"loss"} - {"base line"}) < 0.5) or ({"loss"} > 0.95)'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"JSON attribute access"}),(0,s.jsx)("p",{dir:"auto",children:"For JSON and metdata columns, you can use the dot operator to access values:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"Image"}.extension == "jpg"'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:"or nested values:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsxs)("pre",{className:"notranslate",children:[(0,s.jsx)("code",{children:'{"Image"}.labels.contains("dog")'}),(0,s.jsx)("code",{children:'{"Image"}.labels.dog and {"Image"}.labels.cat'})]}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsxs)("p",{dir:"auto",children:["See below for more information on ",(0,s.jsx)("code",{children:"contains()"})," and other string and JSON methods."]}),(0,s.jsx)("p",{dir:"auto",children:"Note that any mention of a column that contains an asset type (e.g., an image) will automatically reference its metadata."}),(0,s.jsx)("h3",{dir:"auto",children:"Python String and JSON methods"}),(0,s.jsx)("p",{dir:"auto",children:"These are mostly used with column values:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.contains(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.endswith(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.startswith(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.strip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.lstrip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.rstrip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.upper()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.lower()'})})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python if/else expression"}),(0,s.jsx)("p",{dir:"auto",children:"You can use Python's if/else expression to return one value or another."}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'("low" if {"loss"} < 0.5 else "high") == "low"'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python Builtin Functions"}),(0,s.jsx)("p",{dir:"auto",children:"You can use any of these Python builtin functions:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"abs()"})," - absolute value"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"round()"})," - rounds to int"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"max(v1, v2, ...)"})," or ",(0,s.jsx)("code",{children:"max([v1, v2, ...])"})," ","- maximum of list of values"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"min(v1, v2, ...)"})," or ",(0,s.jsx)("code",{children:"min([v1, v2, ...])"})," ","- minimum of list of values"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"len()"})," - length of item"]})]}),(0,s.jsx)("h3",{dir:"auto",children:"Aggregate Functions"}),(0,s.jsx)("p",{dir:"auto",children:"You can use the following aggregate functions. Note that these are more expensive to compute, as they require computing on all rows."}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'AVG({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'MAX({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'MIN({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'SUM({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'TOTAL({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'COUNT({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'STDEV({"Column Name"})'})})]}),(0,s.jsx)("p",{dir:"auto",children:"Examples:"}),(0,s.jsx)("p",{dir:"auto",children:"Find all rows that have a loss value less than the average:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"loss"} < AVG({"loss"})'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python Library Functions and Values"}),(0,s.jsxs)("p",{dir:"auto",children:["Functions from Python's ",(0,s.jsx)("code",{children:"random"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"random.random()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"random.randint()"})})]}),(0,s.jsx)("p",{dir:"auto",children:"Note that random values are regenerated on each call, and thus only have limited use. That means that every time the DataGrid is accessed, the values will change. This would result in bizarre results if you grouped or sorted by a random value."}),(0,s.jsxs)("p",{dir:"auto",children:["Functions and values from Python's ",(0,s.jsx)("code",{children:"math"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.pi"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sqrt()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.acos()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.acosh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.asin()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.asinh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atan()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atan2()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atanh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.ceil()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.cos()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.cosh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.degrees()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.exp()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.floor()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log10()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log2()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.radians()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sin()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sinh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.tan()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.tanh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.trunc()"})})]}),(0,s.jsxs)("p",{dir:"auto",children:["Functions and values from Python's ",(0,s.jsx)("code",{children:"datetime"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"datetime.date(YEAR, MONTH, DAY)"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"datetime.datetime(YEAR, MONTH, DAY[, HOUR, MINUTE, SECOND])"})})]})]})},u=function(e){var n=e.callback;return(0,s.jsxs)("div",{className:"button-outline",onClick:n,children:[(0,s.jsx)("img",{src:"/filter_placeholder.png"})," ",(0,s.jsx)("span",{children:"Filter"})]})},h=function(){return(0,s.jsx)("div",{className:"button-outline",children:(0,s.jsx)("span",{children:"?"})})},f=function(e){var n=e.query,t=(0,o.unstable_useRefreshRoot)(),f=(0,l.useCallback)((function(e){"Enter"===e.key&&t({query:(0,i.Z)((0,r.Z)({},n),{whereExpr:null===filter||void 0===filter?void 0:filter.value,offset:0})})}),[n]),v=(0,l.useCallback)((function(e){var s=document.getElementById("filter");t({query:(0,i.Z)((0,r.Z)({},n),{whereExpr:null===s||void 0===s?void 0:s.value,offset:0})})}),[n]);return(0,l.useEffect)((function(){document.getElementById("filter").value=(null===n||void 0===n?void 0:n.whereExpr)||""}),[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{placeholder:'e.g.: {"column name"} > 0.5',id:"filter",sx:{width:"360px"},InputProps:{endAdornment:(0,s.jsx)(u,{callback:v}),sx:{fontSize:"13px"}},onKeyPress:f}),(0,s.jsx)(c.default,{fullScreen:!1,toggleElement:(0,s.jsx)(h,{}),children:(0,s.jsx)(d,{})})]})}},6295:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7625),s=t(4199);n.default=function(e){var n=e.query,t=e.children,o=(0,i.unstable_useRefreshRoot)();return(0,r.jsx)("select",{name:"Group",id:"group",onChange:function(e){o({query:(0,s.Z)(n,"",{groupBy:e.target.value,sortBy:e.target.value,limit:1e9,offset:0})})},children:t})}},9933:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i)()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(){return(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)(s,{data:[{x:[1,2,3],y:[2,6,3],type:"scatter",mode:"lines+markers",marker:{color:"red"}},{type:"bar",x:[1,2,3],y:[2,5,3]}],layout:{width:320,height:240,title:"A Fancy Plot"}})})}},5029:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var r=t(1799),i=t(9396),s=t(5893),o=t(7625),a=(t(7294),t(883)),l={dgid:null,limit:10,offset:0},c=function(e){var n=e.query,t=e.options,c=(0,o.unstable_useRefreshRoot)(),d={menuPortal:function(e){return(0,i.Z)((0,r.Z)({},e),{zIndex:9999})},menu:function(e){return(0,i.Z)((0,r.Z)({},e),{zIndex:9999})}};return(0,s.jsx)(a.default,{defaultValue:t.find((function(e){return e.value.endsWith(null===n||void 0===n?void 0:n.dgid)}))||"",options:t,styles:d,onChange:function(e){c({query:(0,i.Z)((0,r.Z)({},l),{dgid:e.value})})}})}},9025:function(e,n,t){"use strict";t.r(n);var r=t(1799),i=t(9396),s=t(5893),o=t(1838),a=t(7625),l=t(7294);n.default=function(e){var n,t=e.query,c=e.pagination,d=e.total,u=(0,a.unstable_useRefreshRoot)(),h=(0,l.useCallback)((function(e){var n=(e-1)*(null===t||void 0===t?void 0:t.limit);n<0||n===(null===t||void 0===t?void 0:t.offset)||e-1>=d/(null===t||void 0===t?void 0:t.limit)||u({query:(0,i.Z)((0,r.Z)({},t),{offset:n})})}),[t]),f=(0,l.useMemo)((function(){return(null===t||void 0===t?void 0:t.offset)?Math.ceil((null===t||void 0===t?void 0:t.offset)/(null===t||void 0===t?void 0:t.limit))+1:1}),[t]),v=(0,l.useCallback)((function(){h(f+1)}),[f,h]),m=(0,l.useCallback)((function(){h(f-1)}),[f,h]),x=d.toLocaleString(o.Z.locale);if(0==d)n="No matching rows";else if(1==d)n="Showing 1 matching row";else if(c.length>1){var j=(((null===t||void 0===t?void 0:t.offset)||0)+1).toLocaleString(o.Z.locale),g=Math.min(((null===t||void 0===t?void 0:t.offset)||0)+(null===t||void 0===t?void 0:t.limit),d).toLocaleString(o.Z.locale);n=(0,s.jsxs)(s.Fragment,{children:["Showing"," ",(0,s.jsx)("span",{style:{fontWeight:"500"},children:"".concat(j," - ").concat(g)})," ","rows of ",x," \xa0\xa0|\xa0\xa0"," "]})}else n="Showing all ".concat(x," matching rows");return(0,s.jsxs)("div",{className:"pages",children:[n,c.length>1&&(0,s.jsxs)(s.Fragment,{children:["Page: \xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(1)},children:"|<"})," ","\xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:m,children:"<"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value||1)},value:f,style:{width:"50px",margin:"0 8px",textAlign:"center",fontSize:"12px",fontWeight:"500"}}),(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:v,children:">"})," ","\xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(Math.ceil(d/(null===t||void 0===t?void 0:t.limit)))},children:">|"})]})]})}},3930:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(3707),s=t(9831);t(7294);n.default=function(e){var n=e.query,t=(0,s.useRefreshRoot)();return(0,r.jsx)(i.Z,{className:"cached-icon",onClick:function(){t({query:n,expiration:Date.now()})}})}},9378:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(4980),a=t(1830),l=s()((function(){return Promise.resolve().then(t.bind(t,1437))}),{loadableGenerated:{webpack:function(){return[1437]}},ssr:!1}),c=s()((function(){return t.e(629).then(t.bind(t,1629))}),{loadableGenerated:{webpack:function(){return[1629]}},ssr:!1}),d=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/sort_icon.png"})," ",(0,r.jsx)("span",{children:"Sort"})]})},u=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/group_placeholder.png"})," ",(0,r.jsx)("span",{children:"Group by"})]})},h=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/columns_placeholder.png"})," ",(0,r.jsx)("span",{children:"Columns"})]})};n.default=function(e){var n=e.columns,t=e.query,i=e.options;return(0,r.jsxs)("div",{className:"select-row",children:[(0,r.jsx)(c,{toggleElement:(0,r.jsx)(u,{}),children:(0,r.jsx)(l,{query:t,subtrees:["groupBy","sortBy"],columns:n})}),(0,r.jsx)(c,{toggleElement:(0,r.jsx)(d,{}),children:(0,r.jsx)(l,{query:t,subtree:"sortBy",columns:n})}),(0,r.jsx)(o.default,{toggleElement:(0,r.jsx)(h,{}),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"540px"}}},children:(0,r.jsx)(l,{query:t,isMulti:!0,columns:n,defaultOptions:i})}),(0,r.jsx)(a.default,{query:t})]})}},4958:function(e,n,t){"use strict";t.r(n);var r=t(1799),i=t(9396),s=t(5893),o=t(7625);n.default=function(e){var n=e.query,t=e.children,a=(0,o.unstable_useRefreshRoot)();return(0,s.jsx)("select",{name:"Sort",id:"sort",onChange:function(e){a({query:(0,i.Z)((0,r.Z)({},n),{sortBy:e.target.value,offset:0})})},children:t})}},3340:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(4810);n.default=function(e){var n=e.children;return(0,r.jsx)(i.Z,{injectFirst:!0,children:(0,r.jsx)("div",{className:"main",children:(0,r.jsx)("div",{className:"page",children:n})})})}},1838:function(e,n,t){"use strict";var r=t(3454),i={apiUrl:"".concat(r.env.KANGAS_PROTOCOL||"http","://").concat(r.env.KANGAS_HOST,":").concat(r.env.KANGAS_BACKEND_PORT,"/datagrid/"),apiProxyUrl:"".concat(r.env.KANGAS_PROTOCOL||"http","://").concat(r.env.KANGAS_HOST,":").concat(r.env.KANGAS_BACKEND_PORT,"/datagrid/"),defaultDecimalPrecision:5,locale:"en-US",inColab:"True"===r.env.IN_COLAB};r.env.KANGAS_BACKEND_PROXY&&(r.env.KANGAS_BACKEND_PROXY.endsWith("/")?i.apiProxyUrl="".concat(r.env.KANGAS_BACKEND_PROXY,"datagrid/"):i.apiProxyUrl="".concat(r.env.KANGAS_BACKEND_PROXY,"/datagrid/")),n.Z=i},1763:function(e,n,t){"use strict";var r=t(1438),i=t(2951),s=t(2825);function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return String(e).padStart(n,t)}var a=function(){function e(n){(0,r.Z)(this,e),this.obj=new Date(1e3*n),this.year=o(this.obj.getFullYear(),4),this.month=o(this.obj.getDate(),2),this.day=o(this.obj.getDate(),2),this.hour=o(this.obj.getHours(),2),this.minute=o(this.obj.getMinutes(),2),this.second=o(this.obj.getSeconds(),2)}return(0,i.Z)(e,[{key:"format",value:function(){return"00"===this.hour&&"00"===this.minute&&"00"===this.second?"".concat(this.year,"-").concat(this.month,"-").concat(this.day):"".concat(this.year,"-").concat(this.month,"-").concat(this.day," ").concat(this.hour,":").concat(this.minute,":").concat(this.second)}}]),e}();n.Z=function(e,n){if(null===e)return"None";var t=e;return"DATETIME"===n?t=new a(e).format("YYYY-MM-DD HH:mm:ss"):"FLOAT"===n?t=(0,s.Z)(e).toString():"string"!==typeof e&&(t=e.toString()),t}},1663:function(e,n,t){"use strict";t.d(n,{Lq:function(){return s},Qg:function(){return o}});var r=t(9815),i=function(e){var n=["#ffd51d","#ffbd00","#ff8900","#fb7628","#ff4747","#e51772","#cf0057","#6e1d89","#860dab","#49a5bd","#0096c7","#00b4d8","#12a592","#16cab2","#41ead4"];return n[e%n.length]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";if(["1","true","t","yes"].includes(e.toLowerCase()))return"#12a592";if(["0","false","f","no"].includes(e.toLowerCase()))return"#cf0057";var n=(0,r.Z)(e).reduce((function(e,n){return n.charCodeAt(0)+((e<<5)-e)}),0);return i(Math.abs(n))},o=function(e){var n=function(e){var n=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/);return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}(e),t=n[0],r=n[1],i=n[2];return Math.round((299*t+587*r+114*i)/1e3)>125?"black":"white"}},4199:function(e,n,t){"use strict";var r=t(1799);n.Z=function(e,n,t){return function(e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").trim();if(!t.length)return(0,r.Z)({},e,n);var i=t.match(/([^[.\]])+/g);return i.reduce((function(e,t,r){return void 0===e[t]&&(e[t]={}),r===i.length-1&&(e[t]=n),e[t]}),e),e}((0,r.Z)({},e),n,t)}},2825:function(e,n,t){"use strict";var r=t(828),i=t(1838);n.Z=function(e,n){var t=null!==n&&void 0!==n?n:i.Z.defaultDecimalPrecision;if(null===t)return e;var s=Number(e);if(isNaN(s))return e;if(Number.isInteger(s)||function(e){if(Math.floor(e)===e)return 0;var n=(0,r.Z)(e.toString().split("."),2)[1];return(void 0===n?"":n).length}(s)<=t)return s;var o=Math.pow(10,t);return Math.floor(s*o)/o}},1626:function(e,n,t){"use strict";var r=t(1799),i=t(9396),s=t(7294),o=t(3682),a=t(7632);n.Z=function(e){var n=(0,s.useContext)(o.ConfigContext),t=n.isIframe,l=n.apiUrl,c=(0,s.useState)(),d=c[0],u=c[1],h=(0,s.useRef)(!1),f=(0,s.useMemo)((function(){return(0,a.Z)()}),[]);return(0,s.useEffect)((function(){t&&!h.current&&f&&(window.addEventListener("message",(function(e){var n=e.data,t=n.messageType,r=n.targetId,i=n.raw;if("category"===t&&r===f){var s=JSON.parse(i.replace(/\n/g,"").replace(/\'/g,'"').replace(": None",": null"));u(s)}}),!1),h.current=!0),t?e&&f&&window.parent.postMessage((0,i.Z)((0,r.Z)({},e),{targetId:f,type:"category"}),"*"):fetch("".concat(l,"category"),{body:JSON.stringify(e),method:"post"}).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[e,t,f]),d}},6024:function(e,n,t){"use strict";var r=t(1799),i=t(9396),s=t(7294),o=t(3682),a=t(7632);n.Z=function(e){var n=(0,s.useContext)(o.ConfigContext),t=n.isIframe,l=n.apiUrl,c=(0,s.useState)(),d=c[0],u=c[1],h=(0,s.useRef)(!1),f=(0,s.useMemo)((function(){return(0,a.Z)()}),[]);return(0,s.useEffect)((function(){t&&!h.current&&f&&(window.addEventListener("message",(function(e){var n=e.data,t=n.messageType,r=n.targetId,i=n.raw;if("histogram"===t&&r===f){var s=JSON.parse(i.replace(/\n/g,"").replace(/\'/g,'"').replace(": None",": null"));u(s)}}),!1),h.current=!0),t?e&&f&&window.parent.postMessage((0,i.Z)((0,r.Z)({},e),{targetId:f,type:"histogram"}),"*"):fetch("".concat(l,"histogram"),{body:JSON.stringify(e),method:"post"}).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[e,t,f]),d}}},function(e){e.O(0,[774,115],(function(){return n=6355,e(e.s=n);var n}));var n=e.O();_N_E=n}]);