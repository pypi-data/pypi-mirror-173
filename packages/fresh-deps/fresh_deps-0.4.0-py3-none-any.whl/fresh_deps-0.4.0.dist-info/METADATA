Metadata-Version: 2.1
Name: fresh-deps
Version: 0.4.0
Home-page: https://github.com/2gis-test-labs/fresh-deps
Author: 2GIS Test Labs
Author-email: test-labs@2gis.ru
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Typing :: Typed
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pip-tools (==6.9.0)
Requires-Dist: plumbum (==1.8.0)
Requires-Dist: python-gitlab (==3.10.0)

# fresh-deps

[![PyPI](https://img.shields.io/pypi/v/fresh-deps.svg?style=flat-square)](https://pypi.python.org/pypi/fresh-deps/)
[![Python Version](https://img.shields.io/pypi/pyversions/fresh-deps.svg?style=flat-square)](https://pypi.python.org/pypi/fresh-deps/)

## Installation

```shell
$ pip3 install fresh-deps
```

## Usage

```shell
$ fresh-deps requirements.in --gitlab-project-id=<id> --gitlab-private-token=<token>
```

**or via docker**

```shell
$ docker run -v `pwd`:/workdir 2gistestlabs/fresh-deps fresh-deps requirements.in \
    --gitlab-project-id=<id> \
    --gitlab-private-token=<token>
```

### GitLab CI

Add [job](https://docs.gitlab.com/ee/ci/jobs/) and create [scheduled pipeline](https://docs.gitlab.com/ee/ci/pipelines/schedules.html)

```yml
stages:
  - update_dependencies

fresh_deps:
  stage: update_dependencies
  image: 2gistestlabs/fresh-deps:0.4.0
  variables:
    CI_PRIVATE_TOKEN: $GITLAB_PRIVATE_TOKEN
  script:
    - fresh-deps requirements.in
  only:
    - schedules
```
