(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[4151],{7049:(e,t,s)=>{"use strict";s.d(t,{Z$:()=>n,s7:()=>a,Dp:()=>r,$m:()=>d});const n=e=>e[e.length-1];const c=()=>[];const o=e=>e.slice();const a=(e,t)=>{for(let s=0;s<t.length;s++){e.push(t[s])}};const r=Array.from;const i=(e,t)=>e.every(t);const l=(e,t)=>e.some(t);const d=(e,t)=>e.length===t.length&&i(e,((e,s)=>e===t[s]));const h=e=>e.reduce(((e,t)=>e.concat(t)),[])},97027:(e,t,s)=>{"use strict";s.d(t,{PP:()=>o,UV:()=>d,Hi:()=>h});var n=s(7049);var c=s(59735);const o=(e,t,s=0)=>{try{for(;s<e.length;s++){e[s](...t)}}finally{if(s<e.length){o(e,t,s+1)}}};const a=()=>{};const r=e=>e();const i=e=>e;const l=(e,t)=>e===t;const d=(e,t)=>e===t||e!=null&&t!=null&&e.constructor===t.constructor&&(e instanceof Array&&n.$m(e,t)||typeof e==="object"&&c.$m(e,t));const h=(e,t)=>{if(e==null||t==null){return l(e,t)}if(e.constructor!==t.constructor){return false}if(e===t){return true}switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e);t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength){return false}for(let s=0;s<e.length;s++){if(e[s]!==t[s]){return false}}break}case Set:{if(e.size!==t.size){return false}for(const s of e){if(!t.has(s)){return false}}break}case Map:{if(e.size!==t.size){return false}for(const s of e.keys()){if(!t.has(s)||!h(e.get(s),t.get(s))){return false}}break}case Object:if(c.kE(e)!==c.kE(t)){return false}for(const s in e){if(!c.l$(e,s)||!h(e[s],t[s])){return false}}break;case Array:if(e.length!==t.length){return false}for(let s=0;s<e.length;s++){if(!h(e[s],t[s])){return false}}break;default:return false}return true}},13119:(e,t,s)=>{"use strict";s.d(t,{M:()=>n});const n=()=>{let e=true;return(t,s)=>{if(e){e=false;try{t()}finally{e=true}}else if(s!==undefined){s()}}}},59735:(e,t,s)=>{"use strict";s.d(t,{UI:()=>r,kE:()=>i,l$:()=>h,$m:()=>u});const n=()=>Object.create(null);const c=Object.assign;const o=Object.keys;const a=(e,t)=>{for(const s in e){t(e[s],s)}};const r=(e,t)=>{const s=[];for(const n in e){s.push(t(e[n],n))}return s};const i=e=>o(e).length;const l=(e,t)=>{for(const s in e){if(t(e[s],s)){return true}}return false};const d=(e,t)=>{for(const s in e){if(!t(e[s],s)){return false}}return true};const h=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const u=(e,t)=>e===t||i(e)===i(t)&&d(e,((e,s)=>(e!==undefined||h(t,s))&&t[s]===e))},58290:(e,t,s)=>{"use strict";s.d(t,{y:()=>a});var n=s(72382);var c=s(48307);var o=s(7049);class a{constructor(){this._observers=n.Ue()}on(e,t){n.Yu(this._observers,e,c.U).add(t)}once(e,t){const s=(...n)=>{this.off(e,s);t(...n)};this.on(e,s)}off(e,t){const s=this._observers.get(e);if(s!==undefined){s.delete(t);if(s.size===0){this._observers.delete(e)}}}emit(e,t){return o.Dp((this._observers.get(e)||n.Ue()).values()).forEach((e=>e(...t)))}destroy(){this._observers=n.Ue()}}},48307:(e,t,s)=>{"use strict";s.d(t,{U:()=>n});const n=()=>new Set;const c=e=>Array.from(e)},20817:(e,t,s)=>{"use strict";s.d(t,{ZG:()=>c});const n=()=>new Date;const c=Date.now;const o=e=>{if(e<6e4){const t=metric.prefix(e,-1);return math.round(t.n*100)/100+t.prefix+"s"}e=math.floor(e/1e3);const t=e%60;const s=math.floor(e/60)%60;const n=math.floor(e/3600)%24;const c=math.floor(e/86400);if(c>0){return c+"d"+(n>0||s>30?" "+(s>30?n+1:n)+"h":"")}if(n>0){return n+"h"+(s>0||t>30?" "+(t>30?s+1:s)+"min":"")}return s+"min"+(t>0?" "+t+"s":"")}},1057:(e,t,s)=>{"use strict";s.d(t,{GL:()=>u,Ag:()=>f,xq:()=>g,oy:()=>p});var n=s(29194);var c=s(64485);var o=s(20817);var a=s(14247);var r=s(58290);var i=s(97027);var l=s(20073);var d=s.n(l);const h=3e4;class u extends r.y{constructor(e){super();this.doc=e;this.clientID=e.clientID;this.states=new Map;this.meta=new Map;this._checkInterval=setInterval((()=>{const e=o.ZG();if(this.getLocalState()!==null&&h/2<=e-this.meta.get(this.clientID).lastUpdated){this.setLocalState(this.getLocalState())}const t=[];this.meta.forEach(((s,n)=>{if(n!==this.clientID&&h<=e-s.lastUpdated&&this.states.has(n)){t.push(n)}}));if(t.length>0){f(this,t,"timeout")}}),a.GW(h/10));e.on("destroy",(()=>{this.destroy()}));this.setLocalState({})}destroy(){this.emit("destroy",[this]);this.setLocalState(null);super.destroy();clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID;const s=this.meta.get(t);const n=s===undefined?0:s.clock+1;const c=this.states.get(t);if(e===null){this.states.delete(t)}else{this.states.set(t,e)}this.meta.set(t,{clock:n,lastUpdated:o.ZG()});const a=[];const r=[];const l=[];const d=[];if(e===null){d.push(t)}else if(c==null){if(e!=null){a.push(t)}}else{r.push(t);if(!i.Hi(c,e)){l.push(t)}}if(a.length>0||l.length>0||d.length>0){this.emit("change",[{added:a,updated:l,removed:d},"local"])}this.emit("update",[{added:a,updated:r,removed:d},"local"])}setLocalStateField(e,t){const s=this.getLocalState();if(s!==null){this.setLocalState({...s,[e]:t})}}getStates(){return this.states}}const f=(e,t,s)=>{const n=[];for(let c=0;c<t.length;c++){const s=t[c];if(e.states.has(s)){e.states.delete(s);if(s===e.clientID){const t=e.meta.get(s);e.meta.set(s,{clock:t.clock+1,lastUpdated:o.ZG()})}n.push(s)}}if(n.length>0){e.emit("change",[{added:[],updated:[],removed:n},s]);e.emit("update",[{added:[],updated:[],removed:n},s])}};const g=(e,t,s=e.states)=>{const c=t.length;const o=n.Mf();n.uE(o,c);for(let a=0;a<c;a++){const c=t[a];const r=s.get(c)||null;const i=e.meta.get(c).clock;n.uE(o,c);n.uE(o,i);n.uw(o,JSON.stringify(r))}return n._f(o)};const w=(e,t)=>{const s=decoding.createDecoder(e);const n=encoding.createEncoder();const c=decoding.readVarUint(s);encoding.writeVarUint(n,c);for(let o=0;o<c;o++){const e=decoding.readVarUint(s);const c=decoding.readVarUint(s);const o=JSON.parse(decoding.readVarString(s));const a=t(o);encoding.writeVarUint(n,e);encoding.writeVarUint(n,c);encoding.writeVarString(n,JSON.stringify(a))}return encoding.toUint8Array(n)};const p=(e,t,s)=>{const n=c.l1(t);const a=o.ZG();const r=[];const l=[];const d=[];const h=[];const u=c.yg(n);for(let o=0;o<u;o++){const t=c.yg(n);let s=c.yg(n);const o=JSON.parse(c.kf(n));const u=e.meta.get(t);const f=e.states.get(t);const g=u===undefined?0:u.clock;if(g<s||g===s&&o===null&&e.states.has(t)){if(o===null){if(t===e.clientID&&e.getLocalState()!=null){s++}else{e.states.delete(t)}}else{e.states.set(t,o)}e.meta.set(t,{clock:s,lastUpdated:a});if(u===undefined&&o!==null){r.push(t)}else if(u!==undefined&&o===null){h.push(t)}else if(o!==null){if(!i.Hi(o,f)){d.push(t)}l.push(t)}}}if(r.length>0||d.length>0||h.length>0){e.emit("change",[{added:r,updated:d,removed:h},s])}if(r.length>0||l.length>0||h.length>0){e.emit("update",[{added:r,updated:l,removed:h},s])}}},64151:(e,t,s)=>{"use strict";s.r(t);s.d(t,{WebsocketProvider:()=>F});var n=s(20073);var c=s(72382);var o=s(65679);var a=s(62794);const r=new Map;class i{constructor(e){this.room=e;this.onmessage=null;a.z((t=>t.key===e&&this.onmessage!==null&&this.onmessage({data:o.Gh(t.newValue||"")})))}postMessage(e){a.X.setItem(this.room,o.s3(o.eh(e)))}}const l=typeof BroadcastChannel==="undefined"?i:BroadcastChannel;const d=e=>c.Yu(r,e,(()=>{const t=new Set;const s=new l(e);s.onmessage=e=>t.forEach((t=>t(e.data)));return{bc:s,subs:t}}));const h=(e,t)=>d(e).subs.add(t);const u=(e,t)=>d(e).subs.delete(t);const f=(e,t)=>{const s=d(e);s.bc.postMessage(t);s.subs.forEach((e=>e(t)))};var g=s(20817);var w=s(29194);var p=s(64485);const m=0;const y=1;const b=2;const v=(e,t)=>{w.uE(e,m);const s=n.encodeStateVector(t);w.mP(e,s)};const _=(e,t,s)=>{w.uE(e,y);w.mP(e,n.encodeStateAsUpdate(t,s))};const U=(e,t,s)=>_(t,s,p.HN(e));const k=(e,t,s)=>{try{n.applyUpdate(t,p.HN(e),s)}catch(c){console.error("Caught error while handling a Yjs update",c)}};const I=(e,t)=>{w.uE(e,b);w.mP(e,t)};const S=k;const E=(e,t,s,n)=>{const c=p.yg(e);switch(c){case m:U(e,t,s);break;case y:k(e,s,n);break;case b:S(e,s,n);break;default:throw new Error("Unknown message type")}return c};const M=0;const C=(e,t)=>{encoding.writeVarUint(e,M);encoding.writeVarString(e,t)};const L=(e,t,s)=>{switch(p.yg(e)){case M:s(t,p.kf(e))}};var H=s(1057);var D=s(13119);var A=s(58290);var x=s(14247);var V=s(59735);const P=e=>{const t={};const s=e.split("?");const n=s[s.length-1].split("&");for(var c=0;c<n.length;c++){const e=n[c];if(e.length>0){const s=e.split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1]||"")}}return t};const G=e=>V.UI(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&");var R=s(34155);const $=0;const j=3;const O=1;const Z=2;const B=[];B[$]=(e,t,s,n,c)=>{w.uE(e,$);const o=E(t,e,s.doc,s);if(n&&o===y&&!s.synced){s.synced=true}};B[j]=(e,t,s,n,c)=>{w.uE(e,O);w.mP(e,H.xq(s.awareness,Array.from(s.awareness.getStates().keys())))};B[O]=(e,t,s,n,c)=>{H.oy(s.awareness,p.HN(t),s)};B[Z]=(e,t,s,n,c)=>{L(t,s.doc,W)};const N=1200;const q=2500;const z=3e4;const W=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`);const J=(e,t,s)=>{const n=p.l1(t);const c=w.Mf();const o=p.yg(n);const a=e.messageHandlers[o];if(a){a(c,n,e,s,o)}else{console.error("Unable to compute message")}return c};const Y=e=>{if(e.shouldConnect&&e.ws===null){const t=new e._WS(e.url);t.binaryType="arraybuffer";e.ws=t;e.wsconnecting=true;e.wsconnected=false;e.synced=false;t.onmessage=s=>{e.wsLastMessageReceived=g.ZG();const n=J(e,new Uint8Array(s.data),true);if(w.kE(n)>1){t.send(w._f(n))}};t.onclose=()=>{e.ws=null;e.wsconnecting=false;if(e.wsconnected){e.wsconnected=false;e.synced=false;H.Ag(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e);e.emit("status",[{status:"disconnected"}])}else{e.wsUnsuccessfulReconnects++}setTimeout(Y,x.VV(x.mv(e.wsUnsuccessfulReconnects+1)*N,q),e)};t.onopen=()=>{e.wsLastMessageReceived=g.ZG();e.wsconnecting=false;e.wsconnected=true;e.wsUnsuccessfulReconnects=0;e.emit("status",[{status:"connected"}]);const s=w.Mf();w.uE(s,$);v(s,e.doc);t.send(w._f(s));if(e.awareness.getLocalState()!==null){const s=w.Mf();w.uE(s,O);w.mP(s,H.xq(e.awareness,[e.doc.clientID]));t.send(w._f(s))}};e.emit("status",[{status:"connecting"}])}};const T=(e,t)=>{if(e.wsconnected){e.ws.send(t)}if(e.bcconnected){e.mux((()=>{f(e.bcChannel,t)}))}};class F extends A.y{constructor(e,t,s,{connect:n=true,awareness:c=new H.GL(s),params:o={},WebSocketPolyfill:a=WebSocket,resyncInterval:r=-1}={}){super();while(e[e.length-1]==="/"){e=e.slice(0,e.length-1)}const i=G(o);this.bcChannel=e+"/"+t;this.url=e+"/"+t+(i.length===0?"":"?"+i);this.roomname=t;this.doc=s;this._WS=a;this.awareness=c;this.wsconnected=false;this.wsconnecting=false;this.bcconnected=false;this.wsUnsuccessfulReconnects=0;this.messageHandlers=B.slice();this.mux=D.M();this._synced=false;this.ws=null;this.wsLastMessageReceived=0;this.shouldConnect=n;this._resyncInterval=0;if(r>0){this._resyncInterval=setInterval((()=>{if(this.ws){const e=w.Mf();w.uE(e,$);v(e,s);this.ws.send(w._f(e))}}),r)}this._bcSubscriber=e=>{this.mux((()=>{const t=J(this,new Uint8Array(e),false);if(w.kE(t)>1){f(this.bcChannel,w._f(t))}}))};this._updateHandler=(e,t)=>{if(t!==this){const t=w.Mf();w.uE(t,$);I(t,e);T(this,w._f(t))}};this.doc.on("update",this._updateHandler);this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const o=e.concat(t).concat(s);const a=w.Mf();w.uE(a,O);w.mP(a,H.xq(c,o));T(this,w._f(a))};this._beforeUnloadHandler=()=>{H.Ag(this.awareness,[s.clientID],"window unload")};if(typeof window!=="undefined"){window.addEventListener("beforeunload",this._beforeUnloadHandler)}else if(typeof R!=="undefined"){R.on("exit",(()=>this._beforeUnloadHandler))}c.on("update",this._awarenessUpdateHandler);this._checkInterval=setInterval((()=>{if(this.wsconnected&&z<g.ZG()-this.wsLastMessageReceived){this.ws.close()}}),z/10);if(n){this.connect()}}get synced(){return this._synced}set synced(e){if(this._synced!==e){this._synced=e;this.emit("synced",[e]);this.emit("sync",[e])}}destroy(){if(this._resyncInterval!==0){clearInterval(this._resyncInterval)}clearInterval(this._checkInterval);this.disconnect();if(typeof window!=="undefined"){window.removeEventListener("beforeunload",this._beforeUnloadHandler)}else if(typeof R!=="undefined"){R.off("exit",(()=>this._beforeUnloadHandler))}this.awareness.off("update",this._awarenessUpdateHandler);this.doc.off("update",this._updateHandler);super.destroy()}connectBc(){if(!this.bcconnected){h(this.bcChannel,this._bcSubscriber);this.bcconnected=true}this.mux((()=>{const e=w.Mf();w.uE(e,$);v(e,this.doc);f(this.bcChannel,w._f(e));const t=w.Mf();w.uE(t,$);_(t,this.doc);f(this.bcChannel,w._f(t));const s=w.Mf();w.uE(s,j);f(this.bcChannel,w._f(s));const n=w.Mf();w.uE(n,O);w.mP(n,H.xq(this.awareness,[this.doc.clientID]));f(this.bcChannel,w._f(n))}))}disconnectBc(){const e=w.Mf();w.uE(e,O);w.mP(e,H.xq(this.awareness,[this.doc.clientID],new Map));T(this,w._f(e));if(this.bcconnected){u(this.bcChannel,this._bcSubscriber);this.bcconnected=false}}disconnect(){this.shouldConnect=false;this.disconnectBc();if(this.ws!==null){this.ws.close()}}connect(){this.shouldConnect=true;if(!this.wsconnected&&this.ws===null){Y(this);this.connectBc()}}}}}]);
//# sourceMappingURL=4151.ea773c84a35a1efefa8b.js.map?v=ea773c84a35a1efefa8b