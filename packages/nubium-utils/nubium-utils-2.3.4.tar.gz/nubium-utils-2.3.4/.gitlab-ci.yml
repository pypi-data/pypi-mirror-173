default:
  image: registry.redhat.io/ubi8/python-38@sha256:7319e8e1cb30c51199a61f26869add40295ef874118ea74b55e31ff207a28792
  tags:
    - openshift

stages:
  - test
  - publish

pytest:
  stage: test
  before_script:
    - pip install --upgrade pip pip-tools
    - pip-sync
  script:
    - ./unit_tests.sh

publish:
  stage: publish
  rules:
    - if: $CI_COMMIT_TAG
  script: echo TODO actually publish the thing
