"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[706],{26760:function(e,n,r){r.r(n),r.d(n,{OverviewRoot:function(){return Ie},default:function(){return Le}});var t,o,s,i,a,l=r(325),d=r(27601),c=r(81745),u=r(2803),h=r(99500),p=r(47427),x=r(19065),f=r(73701),g=r(3159),v=r(32030),j=r(34595),m=r(7838),y=r(89646),w=r(31112),b=r(12745),S=r(88863),C=r(12436),E=r(19102),A=r(78093),k=r(39061),O=r(77523),I=r(76336),L=r(37099),N=r(33902),T=r(11831),_=r(54268),z=r(519),F=r(3580),R=r(65864),Z=r(71824),P=r(36753),W=r(16279),V=r(13688),M=r(32289),q=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,Z.N)(V.p,V.y,t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.jobs;e.push({type:"header",repoAddress:r,jobCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){var t=n.isJob,o=n.name;e.push({type:"job",repoAddress:r,isJob:t,name:o})}))})),e}),[n,s]),c=(0,R.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,z.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.I,{}),(0,M.jsx)("div",{style:{overflow:"hidden"},children:(0,M.jsx)(F.W2,{ref:r,children:(0,M.jsx)(F.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,M.jsx)(W.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,M.jsx)(T.u,{content:1===l.jobCount?"1 job":"".concat(l.jobCount," jobs"),placement:"top",children:(0,M.jsx)(_.V,{children:l.jobCount})})},r):(0,M.jsx)(P.b,{name:l.name,isJob:l.isJob,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},G=r(79557),H=r(59019),$=function(e){return(0,H.Z)(e).sort((function(e,n){var r=(0,N.l)(e.repoAddress),t=(0,N.l)(n.repoAddress);return r.localeCompare(t)}))},K=function(e){return new Set(e.map((function(e){return(0,N.l)((0,L.k)(e.repository.name,e.repositoryLocation.name))})))},J=function(){(0,A.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(I.C5),s=o.allRepos,i=o.visibleRepos,a=s.length,d=(0,f.a)(U,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),c=d.data,u=d.loading,h=(0,E.C4)(d,E.dT),p=l.useMemo((function(){var e=K(i);return D(c).filter((function(n){var r=n.repoAddress;return e.has((0,N.l)(r))}))}),[c,i]),g=r.trim().toLocaleLowerCase(),C=g.length>0,k=l.useMemo((function(){var e=g.toLocaleLowerCase();return p.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[p,g]);return(0,M.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,M.jsx)(w.m,{title:(0,M.jsx)(b.X6,{children:"Overview"}),tabs:(0,M.jsx)(G.d,{tab:"jobs",refreshState:h})}),(0,M.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[a>1?(0,M.jsx)(O.C,{}):null,(0,M.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),u&&!a?(0,M.jsx)(v.x,{padding:64,children:(0,M.jsx)(j.$,{purpose:"page"})}):function(){if(u&&!c)return(0,M.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,M.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,M.jsx)(j.$,{purpose:"body-text"}),(0,M.jsx)("div",{style:{color:m.w.Gray600},children:"Loading jobs\u2026"})]})});var e=s.length>i.length;return k.length?(0,M.jsx)(q,{repos:k}):C?(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No matching jobs",description:e?(0,M.jsxs)("div",{children:["No jobs matching ",(0,M.jsx)("strong",{children:r})," were found in the selected repositories"]}):(0,M.jsxs)("div",{children:["No jobs matching ",(0,M.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected repositories":"No jobs were found in this workspace"})})}()]})},D=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.pipelines,u=(0,L.k)(d,s.name),h=c.filter((function(e){var n=e.name;return!(0,k.pv)(n)})).map((function(e){return{isJob:e.isJob,name:e.name}}));h.length>0&&t.push({repoAddress:u,jobs:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return $(t)},U=(0,g.Ps)(t||(t=(0,h.Z)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),C.Bq),B=r(60736),Q=r(75453),X=r(8358),Y=r(78042),ee=r(45352),ne=r(56313),re=r(89324),te=r(31834),oe=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,Z.N)(V.p,V.y,t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.schedules;e.push({type:"header",repoAddress:r,scheduleCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){e.push({type:"schedule",repoAddress:r,name:n})}))})),e}),[n,s]),c=(0,R.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,z.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(te.o,{}),(0,M.jsx)("div",{style:{overflow:"hidden"},children:(0,M.jsx)(F.W2,{ref:r,children:(0,M.jsx)(F.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,M.jsx)(W.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,M.jsx)(T.u,{content:1===l.scheduleCount?"1 schedule":"".concat(l.scheduleCount," schedules"),placement:"top",children:(0,M.jsx)(_.V,{children:l.scheduleCount})})},r):(0,M.jsx)(te.i,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},se=function(){(0,A.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(I.C5),s=o.allRepos,i=o.visibleRepos,a=s.length,d=(0,f.a)(de,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),c=d.data,u=d.loading,h=(0,E.C4)(d,E.dT),p=l.useMemo((function(){var e=K(i);return le(c).filter((function(n){var r=n.repoAddress;return e.has((0,N.l)(r))}))}),[c,i]),g=r.trim().toLocaleLowerCase(),C=g.length>0,k=l.useMemo((function(){var e=g.toLocaleLowerCase();return p.map((function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.schedules.length>0}))}),[p,g]);return(0,M.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,M.jsx)(w.m,{title:(0,M.jsx)(b.X6,{children:"Overview"}),tabs:(0,M.jsx)(G.d,{tab:"schedules",refreshState:h})}),(0,M.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[a>0?(0,M.jsx)(O.C,{}):null,(0,M.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),u&&!a?(0,M.jsx)(v.x,{padding:64,children:(0,M.jsx)(j.$,{purpose:"page"})}):(0,M.jsxs)(M.Fragment,{children:["InstigationStates"===(null===c||void 0===c?void 0:c.unloadableInstigationStatesOrError.__typename)?(0,M.jsx)(ie,{count:c.unloadableInstigationStatesOrError.results.length}):null,(0,M.jsx)(v.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:m.w.KeylineGray},children:(0,M.jsx)(re.K,{daemonHealth:null===c||void 0===c?void 0:c.instance.daemonHealth})}),function(){if(u&&!c)return(0,M.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,M.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,M.jsx)(j.$,{purpose:"body-text"}),(0,M.jsx)("div",{style:{color:m.w.Gray600},children:"Loading schedules\u2026"})]})});var e=s.length>i.length;return k.length?(0,M.jsx)(oe,{repos:k}):C?(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No matching schedules",description:e?(0,M.jsxs)("div",{children:["No schedules matching ",(0,M.jsx)("strong",{children:r})," were found in the selected repositories"]}):(0,M.jsxs)("div",{children:["No schedules matching ",(0,M.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No schedules",description:e?"No schedules were found in the selected repositories":"No schedules were found in this workspace"})})}()]})]})},ie=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],s=t[1];if(!n)return null;var i=1===n?"1 unloadable schedule":"".concat(n," unloadable schedules");return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:m.w.KeylineGray},children:(0,M.jsx)(B.b,{intent:"warning",title:i,description:(0,M.jsxs)(v.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,M.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a different workspace or from a schedule or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,M.jsx)(Q.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,M.jsxs)(X.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,M.jsx)(v.x,{padding:{bottom:8},children:(0,M.jsx)(ae,{})}),(0,M.jsx)(X.cN,{children:(0,M.jsx)(Q.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},ae=function(){var e=(0,f.a)(ce).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,M.jsx)(ne.Y,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,M.jsx)(C.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,M.jsx)(j.$,{purpose:"section"})},le=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.schedules,u=(0,L.k)(d,s.name),h=c.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,schedules:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return $(t)},de=(0,g.Ps)(o||(o=(0,h.Z)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n"])),C.Bq,Y.O),ce=(0,g.Ps)(s||(s=(0,h.Z)(["\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),ee.ai,C.Bq),ue=r(57466),he=r(19377),pe=function(e){var n=e.repos,r=l.useRef(null),t=l.useMemo((function(){return n.map((function(e){var n=e.repoAddress;return(0,N.l)(n)}))}),[n]),o=(0,Z.N)(V.p,V.y,t),s=o.expandedKeys,i=o.onToggle,a=o.onToggleAll,d=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.sensors;e.push({type:"header",repoAddress:r,sensorCount:t.length});var o=(0,N.l)(r);s.includes(o)&&t.forEach((function(n){e.push({type:"sensor",repoAddress:r,name:n})}))})),e}),[n,s]),c=(0,R.w)(n.map((function(e){return e.repoAddress.name}))),u=(0,z.useVirtualizer)({count:d.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=d[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(he.K,{}),(0,M.jsx)("div",{style:{overflow:"hidden"},children:(0,M.jsx)(F.W2,{ref:r,children:(0,M.jsx)(F.Nh,{$totalHeight:h,children:p.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=d[n];return"header"===l.type?(0,M.jsx)(W.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,onToggleAll:a,expanded:s.includes((0,N.l)(l.repoAddress)),showLocation:c.has(l.repoAddress.name),rightElement:(0,M.jsx)(T.u,{content:1===l.sensorCount?"1 sensor":"".concat(l.sensorCount," sensors"),placement:"top",children:(0,M.jsx)(_.V,{children:l.sensorCount})})},r):(0,M.jsx)(he.R,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},xe=function(){(0,A.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(I.C5),s=o.allRepos,i=o.visibleRepos,a=s.length,d=(0,f.a)(je,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),c=d.data,u=d.loading,h=(0,E.C4)(d,E.dT),p=l.useMemo((function(){var e=K(i);return ve(c).filter((function(n){var r=n.repoAddress;return e.has((0,N.l)(r))}))}),[c,i]),g=r.trim().toLocaleLowerCase(),C=g.length>0,k=l.useMemo((function(){var e=g.toLocaleLowerCase();return p.map((function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.sensors.length>0}))}),[p,g]);return(0,M.jsxs)(v.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,M.jsx)(w.m,{title:(0,M.jsx)(b.X6,{children:"Overview"}),tabs:(0,M.jsx)(G.d,{tab:"sensors",refreshState:h})}),(0,M.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[a>0?(0,M.jsx)(O.C,{}):null,(0,M.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),u&&!a?(0,M.jsx)(v.x,{padding:64,children:(0,M.jsx)(j.$,{purpose:"page"})}):(0,M.jsxs)(M.Fragment,{children:["InstigationStates"===(null===c||void 0===c?void 0:c.unloadableInstigationStatesOrError.__typename)?(0,M.jsx)(fe,{count:c.unloadableInstigationStatesOrError.results.length}):null,(0,M.jsx)(ue.F,{daemonHealth:null===c||void 0===c?void 0:c.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:m.w.KeylineGray}}),function(){if(u&&!c)return(0,M.jsx)(v.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,M.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,M.jsx)(j.$,{purpose:"body-text"}),(0,M.jsx)("div",{style:{color:m.w.Gray600},children:"Loading sensors\u2026"})]})});var e=s.length>i.length;return k.length?(0,M.jsx)(pe,{repos:k}):C?(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No matching sensors",description:e?(0,M.jsxs)("div",{children:["No sensors matching ",(0,M.jsx)("strong",{children:r})," were found in the selected repositories"]}):(0,M.jsxs)("div",{children:["No sensors matching ",(0,M.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,M.jsx)(v.x,{padding:{top:20},children:(0,M.jsx)(y.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected repositories":"No sensors were found in this workspace"})})}()]})]})},fe=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],s=t[1];if(!n)return null;var i=1===n?"1 unloadable sensor":"".concat(n," unloadable sensors");return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(v.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:m.w.KeylineGray},children:(0,M.jsx)(B.b,{intent:"warning",title:i,description:(0,M.jsxs)(v.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,M.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a different workspace or from a sensor or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,M.jsx)(Q.zx,{onClick:function(){return s(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,M.jsxs)(X.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,M.jsx)(v.x,{padding:{bottom:8},children:(0,M.jsx)(ge,{})}),(0,M.jsx)(X.cN,{children:(0,M.jsx)(Q.zx,{intent:"primary",onClick:function(){return s(!1)},children:"Done"})})]})]})},ge=function(){var e=(0,f.a)(me).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,M.jsx)(ne.e,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,M.jsx)(C.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,M.jsx)(j.$,{purpose:"section"})},ve=function(e){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("RepositoryLocation"===(null===s||void 0===s?void 0:s.__typename)){var i,a=(0,p.Z)(s.repositories);try{for(a.s();!(i=a.n()).done;){var l=i.value,d=l.name,c=l.sensors,u=(0,L.k)(d,s.name),h=c.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,sensors:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return $(t)},je=(0,g.Ps)(i||(i=(0,h.Z)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n"])),C.Bq,Y.O),me=(0,g.Ps)(a||(a=(0,h.Z)(["\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),ee.ai,C.Bq),ye=r(30804),we=r(87011),be=r(82348),Se=r(86771),Ce=r(73478),Ee=r(12188),Ae=36e5,ke=function(e){switch(e){case"1":return Ae;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},Oe=function(){(0,A.Px)(),(0,be.j)("Runs");var e=l.useContext(I.C5),n=e.allRepos,r=e.visibleRepos,t=l.useState(""),o=(0,x.Z)(t,2),s=o[0],i=o[1],a=(0,Ce.S)("12"),d=(0,x.Z)(a,2),c=d[0],u=d[1],h=l.useState((function(){return Date.now()})),p=(0,x.Z)(h,2),f=p[0],g=p[1],j=l.useState((function(){return 0})),m=(0,x.Z)(j,2),y=m[0],C=m[1];l.useEffect((function(){g(Date.now());var e=setInterval((function(){g(Date.now())}),6e4);return function(){clearInterval(e)}}),[c]);var E=l.useCallback((function(){C((function(e){return e-ke(c)}))}),[c]),k=l.useCallback((function(){C((function(e){return e+ke(c)}))}),[c]),N=l.useCallback((function(){C(0)}),[]),T=l.useMemo((function(){return[f-Number(c)*Ae+y,f+36e5+y]}),[c,f,y]),_=l.useMemo((function(){var e=s.toLocaleLowerCase().trim(),n=r.flatMap((function(n){var r=(0,L.k)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter((function(n){return n.name.toLocaleLowerCase().includes(e)})).map((function(e){return(0,Ee.G)(r,e.name)}))}));return new Set(n)}),[r,s]);return(0,M.jsxs)(ye.T,{children:[(0,M.jsx)(w.m,{title:(0,M.jsx)(b.X6,{children:"Overview"}),tabs:(0,M.jsx)(G.d,{tab:"timeline"})}),(0,M.jsxs)(v.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,M.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[n.length>1&&(0,M.jsx)(O.C,{}),(0,M.jsx)(S.oi,{icon:"search",value:s,onChange:function(e){return i(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"200px"}})]}),(0,M.jsxs)(v.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,M.jsx)(we.h,{activeItems:new Set([c]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return u(e)}}),(0,M.jsxs)(v.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,M.jsx)(Q.zx,{onClick:E,children:"\u2190"}),(0,M.jsx)(Q.zx,{onClick:N,children:"Now"}),(0,M.jsx)(Q.zx,{onClick:k,children:"\u2192"})]})]})]}),(0,M.jsx)(Se.C,{range:T,visibleJobKeys:_})]})},Ie=function(){return(0,c.gV)().flagNewWorkspace?(0,M.jsxs)(d.rs,{children:[(0,M.jsx)(d.AW,{path:"/overview/timeline",children:(0,M.jsx)(Oe,{})}),(0,M.jsx)(d.AW,{path:"/overview/jobs",children:(0,M.jsx)(J,{})}),(0,M.jsx)(d.AW,{path:"/overview/schedules",children:(0,M.jsx)(se,{})}),(0,M.jsx)(d.AW,{path:"/overview/sensors",children:(0,M.jsx)(xe,{})}),(0,M.jsx)(d.AW,{path:"/overview/backfills",children:(0,M.jsx)(u.A,{})}),(0,M.jsx)(d.AW,{path:"*",render:function(){return(0,M.jsx)(d.l_,{to:"/overview/timeline"})}})]}):(0,M.jsx)(d.l_,{to:"/instance/overview"})},Le=Ie}}]);
//# sourceMappingURL=706.a1ee9195.chunk.js.map