"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[839],{2803:function(e,n,t){t.d(n,{A:function(){return I}});var i,r,o=t(99500),a=t(95764),s=t(73701),l=t(3159),c=t(30804),u=t(31112),d=t(12745),f=t(32030),h=t(89646),p=t(60736),m=t(47387),x=t(325),g=t(81745),v=t(12436),y=t(19102),w=t(78093),j=t(82348),b=t(79557),k=t(77892),T=t(50741),C=t(2789),N=t(78042),_=t(25171),Z=t(64480),S=t(32289),I=function(){(0,w.Px)();var e=(0,g.gV)().flagNewWorkspace,n=x.useContext(_.N).pageTitle,t=(0,s.a)(P),i=(0,k.l)({query:R,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),r=i.queryResult,o=i.paginationProps,l=(0,y.C4)(r,y.dT);return(0,j.j)("Backfills"),(0,S.jsxs)(c.T,{children:[(0,S.jsx)(u.m,{title:(0,S.jsx)(d.X6,{children:e?"Overview":n}),tabs:e?(0,S.jsx)(b.d,{tab:"backfills",refreshState:l}):(0,S.jsx)(Z.Z,{tab:"backfills",refreshState:l})}),(0,S.jsx)(T.g,{queryResult:r,allowStaleData:!0,children:function(e){var n,i=e.partitionBackfillsOrError;if("PythonError"===i.__typename)return(0,S.jsx)(v.T9,{error:i});if(!i.results.length)return(0,S.jsx)(f.x,{padding:{vertical:64},children:(0,S.jsx)(h.t,{icon:"no-results",title:"No backfills found",description:(0,S.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var s=((null===(n=t.data)||void 0===n?void 0:n.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),l=s.length&&s.every((function(e){return e}));return(0,S.jsxs)("div",{children:[l?null:(0,S.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,S.jsx)(p.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,S.jsxs)("div",{children:["See the"," ",(0,S.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,S.jsx)(C.G,{backfills:i.results.slice(0,10),refetch:r.refetch}),i.results.length>0?(0,S.jsx)("div",{style:{marginTop:"16px"},children:(0,S.jsx)(m.b$,(0,a.Z)({},o))}):null]})}})]})},P=(0,l.Ps)(i||(i=(0,o.Z)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),N.O),R=(0,l.Ps)(r||(r=(0,o.Z)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),C.b,v.Bq)},64480:function(e,n,t){t.d(n,{Z:function(){return p}});var i=t(32030),r=t(31269),o=t(325),a=t(81745),s=t(19102),l=t(81300),c=t(52140),u=t(37286),d=t(25171),f=t(40515),h=t(32289),p=function(e){var n=e.refreshState,t=e.tab,p=o.useContext(d.N).healthTitle,m=(0,a.gV)().flagNewWorkspace,x=(0,f._)();return(0,h.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,h.jsxs)(r.mQ,{selectedTabId:t,children:[m?null:(0,h.jsx)(u.f,{id:"overview",title:"Overview",to:"/instance/overview"}),m?(0,h.jsx)(u.f,{id:"code-locations",title:"Code locations",to:"/instance/code-locations",icon:(0,h.jsx)(c.S,{placeholder:!1})}):null,(0,h.jsx)(u.f,{id:"health",title:p,to:"/instance/health",icon:(0,h.jsx)(l.N,{})}),m?null:(0,h.jsx)(u.f,{id:"schedules",title:"Schedules",to:"/instance/schedules"}),m?null:(0,h.jsx)(u.f,{id:"sensors",title:"Sensors",to:"/instance/sensors"}),m?null:(0,h.jsx)(u.f,{id:"backfills",title:"Backfills",to:"/instance/backfills"}),x?(0,h.jsx)(u.f,{id:"config",title:"Configuration",to:"/instance/config"}):null]}),n?(0,h.jsx)(i.x,{padding:{bottom:8},children:(0,h.jsx)(s.xi,{refreshState:n})}):null]})}},29440:function(e,n,t){t.d(n,{E:function(){return p},q:function(){return m}});var i,r=t(99500),o=t(59019),a=t(3159),s=t(12745),l=t(7838),c=t(325),u=t(68156),d=t(5484),f=t(32289),h={showTimezone:!0,showSeconds:!0},p=function(e){var n=e.schedules,t=c.useMemo((function(){return n.map((function(e){var n=e.executionTimezone,t=e.futureTicks;return e.scheduleState.status===d.yn.RUNNING?{executionTimezone:n,earliest:Math.min.apply(Math,(0,o.Z)(t.results.map((function(e){return e.timestamp}))))}:null})).reduce((function(e,n){return!e||null!==n&&void 0!==n&&n.earliest&&n.earliest<(null===e||void 0===e?void 0:e.earliest)?n:e}),null)}),[n]);return t?(0,f.jsxs)(s.aU,{color:l.w.Gray500,children:["Next tick:"," ",(0,f.jsx)(u.v,{timestamp:t.earliest,timezone:t.executionTimezone,timeFormat:h})]}):null},m=(0,a.Ps)(i||(i=(0,r.Z)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"])))},77523:function(e,n,t){t.d(n,{C:function(){return f}});var i=t(19065),r=t(8358),o=t(32030),a=t(75453),s=t(27293),l=t(325),c=t(93141),u=t(76336),d=t(32289),f=function(){var e=l.useContext(u.C5),n=e.allRepos,t=e.visibleRepos,f=e.toggleVisible,h=l.useState(!1),p=(0,i.Z)(h,2),m=p[0],x=p[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:m,style:{width:"auto"},onClose:function(){return x(!1)},children:[(0,d.jsx)(r.fK,{icon:"repo",label:"Repositories"}),(0,d.jsx)(c.e,{options:n,onBrowse:function(){return x(!1)},onToggle:f,selected:t}),(0,d.jsx)(r.cN,{children:(0,d.jsx)(o.x,{padding:{top:8},children:(0,d.jsx)(a.zx,{intent:"none",onClick:function(){return x(!1)},children:"Done"})})})]}),(0,d.jsx)(a.zx,{intent:"none",icon:(0,d.jsx)(s.JO,{name:"folder"}),rightIcon:(0,d.jsx)(s.JO,{name:"expand_more"}),onClick:function(){return x(!0)},children:"".concat(t.length," of ").concat(n.length," Repositories")})]})}},40515:function(e,n,t){t.d(n,{_:function(){return s}});var i,r=t(99500),o=t(73701),a=t(3159),s=function(){var e=(0,o.a)(l).data;return!(null===e||void 0===e||!e.instance.hasInfo)},l=(0,a.Ps)(i||(i=(0,r.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n"])))},13688:function(e,n,t){t.d(n,{p:function(){return i},y:function(){return r}});var i="virtualized-expansion-state",r="overview-collapsed-state"},79557:function(e,n,t){t.d(n,{d:function(){return l}});var i=t(32030),r=t(31269),o=(t(325),t(19102)),a=t(37286),s=t(32289),l=function(e){var n=e.refreshState,t=e.tab;return(0,s.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,s.jsxs)(r.mQ,{selectedTabId:t,children:[(0,s.jsx)(a.f,{id:"timeline",title:"Timeline",to:"/overview/timeline"}),(0,s.jsx)(a.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,s.jsx)(a.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,s.jsx)(a.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),(0,s.jsx)(a.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,s.jsx)(i.x,{padding:{bottom:8},children:(0,s.jsx)(o.xi,{refreshState:n})}):null]})}},86771:function(e,n,t){t.d(n,{C:function(){return de}});var i=t(325),r=t(16798),o=t(59019),a=t(95764),s=t(19065),l=t(922),c=t(32030),u=t(7838),d=t(11831),f=t(54268),h=t(8546),p=t(27293),m=t(85899),x=t(762),g=t(34595),v=t(12745),y=t(55690),w=t.n(y),j=t(74549),b=t(81745),k=t(37971),T=t(7489),C=t(13688),N=t(68156),_=t(28797),Z=t(65864),S=t(71824),I=t(33902),P=t(36114),R=t(35815),E=t(59549),M=t(34653),O=t(32460),F=t(18499),D=function(e){switch(e){case"queued":case"scheduled":return u.w.Blue200;case"inProgress":return u.w.Blue500;case"failed":return u.w.Red500;case"succeeded":return u.w.Green500}},L=function(e){var n={scheduled:0,queued:0,inProgress:0,failed:0,succeeded:0};e.forEach((function(e){var t=e.status;"SCHEDULED"===t?n.scheduled++:M.sy.has(t)?n.queued++:M.Ys.has(t)?n.inProgress++:M.hd.has(t)?n.failed++:M._m.has(t)&&n.succeeded++}));var t=Object.keys(n).filter((function(e){return n[e]>0}));if(1===t.length){var i=(0,s.Z)(t,1)[0];return D(i)}for(var r=e.length,o=[n.failed>0?{status:"failed",pct:100*n.failed/r}:null,n.succeeded>0?{status:"succeeded",pct:100*n.succeeded/r}:null,n.inProgress>0?{status:"inProgress",pct:100*n.inProgress/r}:null,n.queued>0?{status:"queued",pct:100*n.queued/r}:null,n.scheduled>0?{status:"scheduled",pct:100*n.scheduled/r}:null].filter(Boolean),a="",l=0,c=0,u=0;u<o.length;u++){var d=o[u];if(d){var f=d.status,h=d.pct;c=l,l+=h;var p=D(f);0===u?a+="".concat(p," ").concat(h.toFixed(1),"%, "):u===o.length-1?a+="".concat(p," ").concat(c.toFixed(1),"%"):a+="".concat(p," ").concat(c.toFixed(1),"% ").concat(l.toFixed(1),"%, ")}}return"linear-gradient(to right, ".concat(a,")")},G=t(32289),B=32,$=function(e){var n=e.loading,t=void 0!==n&&n,l=e.jobs,d=e.range,f=i.useState(null),h=(0,s.Z)(f,2),p=h[0],m=h[1],x=Date.now(),g=(0,s.Z)(d,2),v=(g[0],x<=g[1]),y=l.reduce((function(e,n){var t=n.repoAddress,i=(0,I.l)(t),s=e[i]||[];return(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},i,[].concat((0,o.Z)(s),[n])))}),{}),w=Object.keys(y),j=(0,S.N)(C.p,C.y,w),b=j.expandedKeys,k=j.onToggle,T=j.onToggleAll,N=i.useRef(null),_=i.useCallback((function(e){var n;e?(N.current=new ResizeObserver((function(e){var n=e[0];m(n.contentRect.width)})),N.current.observe(e)):null===(n=N.current)||void 0===n||n.disconnect()}),[]);if(!p)return(0,G.jsx)(te,{$height:174,ref:_,children:(0,G.jsx)("div",{})});var E=Object.keys(y).sort((function(e,n){return e.localeCompare(n)})),M=64,O=E.filter((function(e){return b.includes(e)})).reduce((function(e,n){return e+y[n].length}),0),F=E.length*R.l+B*O,D=(0,Z.w)(E.map((function(e){var n;return(null===(n=(0,P.g)(e))||void 0===n?void 0:n.name)||""}))),L=E.length>0,$=64+(L?F:110);return(0,G.jsxs)(te,{$height:$,ref:_,children:[(0,G.jsx)(c.x,{padding:{left:24},flex:{direction:"column",justifyContent:"center"},style:{fontSize:"16px",height:64},border:{side:"top",width:1,color:u.w.KeylineGray},children:"Jobs"}),(0,G.jsx)(q,{interval:36e5,range:d,height:L?F:0}),E.length?E.map((function(e){var n,t=null===(n=(0,P.g)(e))||void 0===n?void 0:n.name,i=y[e],r=M,o=b.includes(e);return M=r+R.l+(o?i.length*B:0),(0,G.jsx)(z,{expanded:o,range:d,top:r,repoKey:e,isDuplicateRepoName:!(!t||!D.has(t)),jobs:y[e],onToggle:k,onToggleAll:T,width:p},e)})):(0,G.jsx)(ne,{loading:t,includesTicks:v})]})},z=function(e){var n=e.expanded,t=e.onToggle,r=e.onToggleAll,o=e.repoKey,a=e.isDuplicateRepoName,s=e.jobs,l=e.range,c=e.top,u=e.width,d=(0,P.g)(o),f=(null===d||void 0===d?void 0:d.name)||"Unknown repo",h=(null===d||void 0===d?void 0:d.location)||"Unknown location",p=i.useCallback((function(e){e.getModifierState("Shift")?r(!n):d&&t(d)}),[n,t,r,d]);return(0,G.jsxs)("div",{children:[(0,G.jsx)(U,{$top:c,children:(0,G.jsx)(R.L,{expanded:n,repoName:f,repoLocation:h,onClick:p,showLocation:a,rightElement:(0,G.jsx)(K,{jobs:s})})}),n?s.map((function(e,n){return(0,G.jsx)(ee,{job:e,top:c+R.l+n*B,range:l,width:u},e.key)})):null]})},K=i.memo((function(e){var n=e.jobs,t=i.useMemo((function(){var e=0,t=0,i=0;return n.forEach((function(n){n.runs.forEach((function(n){var r=n.status;"SCHEDULED"!==r&&(M.Ys.has(r)?e++:M.hd.has(r)?t++:M._m.has(r)&&i++)}))})),{inProgressCount:e,failedCount:t,succeededCount:i}}),[n]),r=t.inProgressCount,o=t.failedCount,a=t.succeededCount,s=1===r?"1 run in progress":"".concat(r," runs in progress"),l=1===a?"1 run succeeded":"".concat(a," runs succeeded"),u=1===o?"1 run failed":"".concat(o," runs failed");return(0,G.jsxs)(c.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[r>0?(0,G.jsx)(d.u,{content:(0,G.jsx)(A,{children:s}),placement:"top",children:(0,G.jsx)(f.V,{intent:"primary",children:r})}):null,a>0?(0,G.jsx)(d.u,{content:(0,G.jsx)(A,{children:l}),placement:"top",children:(0,G.jsx)(f.V,{intent:"success",children:a})}):null,o>0?(0,G.jsx)(d.u,{content:(0,G.jsx)(A,{children:u}),placement:"top",children:(0,G.jsx)(f.V,{intent:"danger",children:o})}):null]})})),A=l.ZP.span.withConfig({displayName:"RunTimeline__StatusSpan",componentId:"sc-1k6kbha-0"})(["white-space:nowrap;"]),U=l.ZP.div.withConfig({displayName:"RunTimeline__SectionHeaderContainer",componentId:"sc-1k6kbha-1"})(["position:absolute;top:0;left:0;right:0;",""],(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")})),q=function(e){var n=e.interval,t=e.range,r=e.height,a=(0,s.Z)(t,2),l=a[0],d=a[1],f=navigator.language,h=i.useContext(k.j),p=(0,s.Z)(h,1)[0],m="Automatic"===p?(0,T.cw)():p,x=i.useMemo((function(){return new Intl.DateTimeFormat(f,{month:"numeric",day:"numeric",year:"numeric",timeZone:m})}),[f,m]),g=i.useMemo((function(){return new Intl.DateTimeFormat(f,{hour:"numeric",timeZone:m})}),[f,m]),v=i.useMemo((function(){for(var e=d-l,n=[],t=w().tz(l,m).startOf("day");t.valueOf()<d;){var i=t.valueOf();t.add(1,"day");var r=t.valueOf();n.push({dayStart:i,dayEnd:r})}return n.map((function(n){var t=n.dayStart,i=n.dayEnd,r=new Date(t),o=t-l,a=o+(i-t),s=Math.max(0,o/e*100),c=Math.min(100,a/e*100);return{label:x.format(r),key:r.toString(),left:s,width:c-s}}))}),[x,d,l,m]),y=i.useMemo((function(){var e=d-l,t=l-l%n,i=Math.ceil(e/n)+1;return(0,o.Z)(new Array(i)).map((function(i,r){var o=t+r*n,a=new Date(o);return{label:g.format(a).replace(" ",""),key:a.toString(),left:(o-l)/e*100}})).filter((function(e){return e.left>0}))}),[d,l,n,g]),j=Date.now(),b="".concat(((j-l)/(d-l)*100).toPrecision(3),"%");return(0,G.jsxs)(J,{style:{height:"".concat(r,"px")},children:[(0,G.jsx)(W,{children:v.map((function(e){return(0,G.jsx)(H,{style:{left:"".concat(e.left.toPrecision(3),"%"),width:"".concat(e.width.toPrecision(3),"%")},children:e.width>10?(0,G.jsx)(c.x,{flex:{justifyContent:"center"},children:e.label}):null},e.key)}))}),(0,G.jsx)(W,{children:y.map((function(e){return(0,G.jsx)(V,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,G.jsxs)(Q,{children:[(0,G.jsx)(Y,{style:{left:0,backgroundColor:u.w.Gray200}}),y.map((function(e){return(0,G.jsx)(Y,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),j>=l&&j<=d?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(X,{style:{left:b},children:"Now"}),(0,G.jsx)(Y,{style:{left:b,backgroundColor:u.w.Blue500,zIndex:1}})]}):null]})]})},J=l.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-2"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],320,h.b.monospace,u.w.Gray800),W=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-3"})(["display:flex;align-items:center;box-shadow:inset 1px 0 0 ",",inset 0 1px 0 ",",inset -1px 0 0 ",";height:","px;position:relative;user-select:none;font-size:12px;width:100%;overflow:hidden;"],u.w.KeylineGray,u.w.KeylineGray,u.w.KeylineGray,32),H=l.ZP.div.withConfig({displayName:"RunTimeline__DateLabel",componentId:"sc-1k6kbha-4"})(["position:absolute;padding:8px 0;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],u.w.KeylineGray),V=l.ZP.div.withConfig({displayName:"RunTimeline__TimeLabel",componentId:"sc-1k6kbha-5"})(["position:absolute;padding:8px;box-shadow:inset 1px 0 0 ",";white-space:nowrap;"],u.w.KeylineGray),Q=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-6"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],u.w.KeylineGray,u.w.KeylineGray),Y=l.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-7"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],u.w.KeylineGray),X=l.ZP.div.withConfig({displayName:"RunTimeline__NowMarker",componentId:"sc-1k6kbha-8"})(["background-color:",";border-radius:1px;color:",";cursor:default;font-size:12px;line-height:12px;margin-left:-12px;padding:1px 4px;position:absolute;top:-14px;user-select:none;"],u.w.Blue500,u.w.White),ee=function(e){var n=e.job,t=e.top,r=e.range,o=e.width,a=(0,s.Z)(r,2),l=a[0],d=a[1],f=o-320,h=n.runs,g=i.useMemo((function(){return(0,F.i)({runs:h,start:l,end:d,width:f,minChunkWidth:2,minMultipleWidth:12})}),[h,l,d,f]);return n.runs.length?(0,G.jsxs)(ie,{$top:t,children:[(0,G.jsxs)(re,{children:[(0,G.jsx)(p.JO,{name:"asset"===n.jobType?"asset":"job"}),(0,G.jsx)("div",{style:{width:268},children:"asset"===n.jobType?(0,G.jsx)("span",{style:{color:u.w.Gray900},children:(0,G.jsx)(m.g,{text:n.jobName})}):(0,G.jsx)(j.rU,{to:n.path,children:(0,G.jsx)(m.g,{text:n.jobName})})})]}),(0,G.jsx)(oe,{children:g.map((function(e){var t=e.left,i=e.width,r=e.runs.length;return(0,G.jsx)(ae,{$background:L(e.runs),$multiple:r>1,style:{left:"".concat(t,"px"),width:"".concat(i,"px")},children:(0,G.jsx)(x.J,{content:(0,G.jsx)(le,{job:n,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,G.jsx)(c.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:r>1?(0,G.jsx)(se,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},ne=function(e){var n=e.loading,t=e.includesTicks,i=(0,b.gV)().flagNewWorkspace;return(0,G.jsx)(c.x,{background:u.w.White,padding:{vertical:24},flex:{direction:"row",justifyContent:"center"},border:{side:"horizontal",width:1,color:u.w.KeylineGray},children:n?(0,G.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,G.jsx)(g.$,{purpose:"body-text"}),t?"Loading runs and scheduled ticks":"Loading runs"]}):(0,G.jsxs)(c.x,{flex:{direction:"column",gap:12,alignItems:"center"},children:[(0,G.jsx)("div",{children:t?"No runs or scheduled ticks in this time period.":"No runs in this time period."}),(0,G.jsxs)(c.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,G.jsx)(_.A,{icon:(0,G.jsx)(p.JO,{name:"add_circle"}),to:i?"/overview/jobs":"/workspace",children:"Launch a run"}),(0,G.jsx)("span",{children:"or"}),(0,G.jsx)(_.A,{icon:(0,G.jsx)(p.JO,{name:"materialization"}),to:"/instance/asset-groups",children:"Materialize an asset"})]})]})})},te=l.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-9"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),ie=l.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-10"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],u.w.KeylineGray,33,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),u.w.KeylineGray,u.w.KeylineGray,u.w.Gray10),re=l.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-11"})(["align-items:center;display:flex;font-size:13px;justify-content:flex-start;gap:8px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],320),oe=l.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-12"})(["flex:1;position:relative;height:","px;"],B),ae=l.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-13"})(["align-items:center;background:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$background}),28,(function(e){return e.$multiple?"min-width: ".concat(12,"px"):null})),se=l.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-14"})(["color:",";cursor:default;font-family:",";font-size:14px;font-weight:600;user-select:none;"],u.w.White,h.b.monospace),le=function(e){var n=e.job,t=e.batch,i=t.runs.slice(0,50),r=t.runs.length-i.length;return(0,G.jsxs)(c.x,{style:{width:"260px"},children:[(0,G.jsx)(c.x,{padding:12,border:{side:"bottom",width:1,color:u.w.KeylineGray},children:(0,G.jsx)(ce,{children:n.jobName})}),(0,G.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:i.map((function(e,n){return(0,G.jsxs)(c.x,{border:n>0?{side:"top",width:1,color:u.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,G.jsxs)(c.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,G.jsx)(E.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,G.jsx)(j.rU,{to:"/instance/runs/".concat(e.id),children:(0,G.jsx)(v.fv,{children:e.id.slice(0,8)})})]}),(0,G.jsx)(v.fv,{children:"SCHEDULED"===e.status?(0,G.jsx)(N.v,{timestamp:e.startTime/1e3}):(0,G.jsx)(O.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))}),r>0?(0,G.jsx)(c.x,{padding:12,border:{side:"top",width:1,color:u.w.KeylineGray},children:(0,G.jsxs)(j.rU,{to:"".concat(n.path,"runs"),children:["+ ",r," more"]})}):null]})},ce=l.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-15"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),ue=t(12188),de=function(e){var n=e.range,t=e.visibleJobKeys,r=e.runsFilter,o=void 0===r?{}:r,a=(0,ue.Z)(n,o),s=a.jobs,l=a.loading,c=i.useMemo((function(){return s.filter((function(e){var n=e.key;return t.has(n)}))}),[s,t]);return(0,G.jsx)($,{loading:l,range:n,jobs:c})}},18499:function(e,n,t){t.d(n,{a:function(){return r},i:function(){return o}});var i=t(59019),r=function(e,n){return!(e.end<n.start||n.end<e.start)},o=function(e){for(var n=e.runs,t=e.start,r=e.end,o=e.width,s=e.minChunkWidth,l=e.minMultipleWidth,c=r-t,u=(Date.now()-t)/(r-t)*o,d=n.map((function(e){var n=e.startTime,i=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:i,left:Math.max(0,Math.floor((n-t)/c*o)),width:Math.max(s,Math.min(Math.ceil((i-n)/c*o),Math.ceil((i-t)/c*o)))}})).sort((function(e,n){return n.left-e.left})),f=[];d.length;){var h=d.shift(),p=d[0];if(h)if(p&&a(h,p,l,u)){d.shift(),h.runs=[].concat((0,i.Z)(h.runs),(0,i.Z)(p.runs)),h.startTime=Math.min(h.startTime,p.startTime),h.endTime=Math.max(h.endTime,p.endTime);var m=Math.max(h.left+l,h.left+h.width,p.left+p.width),x=Math.min(h.left,p.left);h.width=m-x,h.left=x,d.unshift(h)}else f.push(h)}return f},a=function(e,n,t,i){var o=e.left,a=e.left+Math.max(e.width,t),s=n.left,l=n.left+Math.max(n.width,t),c=Math.min(e.left,n.left),u=Math.max(e.left+Math.max(e.width,t),n.left+Math.max(n.width,t));return r({start:o,end:a},{start:s,end:l})&&(c>i||u<i)}},73478:function(e,n,t){t.d(n,{S:function(){return a}});var i=t(19065),r=t(325),o=t(76314),a=function(e){var n=r.useCallback((function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}}),[e]),t=(0,o.U)("dagit.run-timeline-hour-window",n),a=(0,i.Z)(t,2),s=a[0],l=a[1],c=r.useCallback((function(n){l(n||e)}),[e,l]);return r.useMemo((function(){return[s,c]}),[s,c])}},12188:function(e,n,t){t.d(n,{Z:function(){return b},G:function(){return k}});var i,r=t(99500),o=t(16798),a=t(47427),s=t(59019),l=t(95764),c=t(19065),u=t(73701),d=t(3159),f=t(325),h=t(39061),p=t(29440),m=t(5484),x=t(37099),g=t(33902),v=t(25582),y=t(34653),w=t(55752),j=t(18499),b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)(e,2),i=t[0],r=t[1],d=i/1e3,p=r/1e3,g=(0,u.a)(T,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:(0,l.Z)((0,l.Z)({},n),{},{statuses:[m.VO.CANCELING,m.VO.STARTED],createdBefore:p}),terminatedFilter:(0,l.Z)((0,l.Z)({},n),{},{statuses:Array.from(y.cv),createdBefore:p,updatedAfter:d}),tickCursor:d,ticksUntil:p}}),w=g.data,b=g.previousData,C=g.loading,N=w||b||{},_=N.unterminated,Z=N.terminated,S=N.workspaceOrError,I=f.useMemo((function(){var e={},n=Date.now();return[].concat((0,s.Z)("Runs"===(null===_||void 0===_?void 0:_.__typename)?_.results:[]),(0,s.Z)("Runs"===(null===Z||void 0===Z?void 0:Z.__typename)?Z.results:[])).forEach((function(t){if(t.startTime&&t.repositoryOrigin&&(0,j.a)({start:i,end:r},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var o=k({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[o]=[].concat((0,s.Z)(e[o]||[]),[{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}})),e}),[r,_,Z,i]),P=f.useMemo((function(){if(!S||"Workspace"!==S.__typename)return[];var e,n=[],t=(0,a.Z)(S.locationEntries);try{var c=function(){var t,o=e.value;if("WorkspaceLocationEntry"!==o.__typename||"RepositoryLocation"!==(null===(t=o.locationOrLoadError)||void 0===t?void 0:t.__typename))return"continue";var l,c=Date.now(),u=(0,a.Z)(o.locationOrLoadError.repositories);try{for(u.s();!(l=u.n()).done;){var d,f=l.value,p=(0,x.k)(f.name,o.locationOrLoadError.name),g=(0,a.Z)(f.pipelines);try{var y=function(){var e,t=d.value,o=(f.schedules||[]).filter((function(e){return e.pipelineName===t.name})),l=[],u=(0,a.Z)(o);try{var x=function(){var n=e.value;n.scheduleState.status===m.yn.RUNNING&&n.futureTicks.results.forEach((function(e){var t=e.timestamp,o=1e3*t;o>c&&(0,j.a)({start:i,end:r},{start:o,end:o})&&l.push({id:"".concat(n.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:o,endTime:o+5e3})}))};for(u.s();!(e=u.n()).done;)x()}catch(T){u.e(T)}finally{u.f()}var g=(0,h.pv)(t.name),y=k(p,t.name),w=g?"Ad hoc materializations":t.name,b=I[y]||[];(l.length||b.length)&&n.push({key:y,jobName:w,jobType:g?"asset":"job",repoAddress:p,path:(0,v.jT)({repoName:p.name,repoLocation:p.location,pipelineName:t.name,isJob:t.isJob}),runs:[].concat((0,s.Z)(b),l)})};for(g.s();!(d=g.n()).done;)y()}catch(w){g.e(w)}finally{g.f()}}}catch(w){u.e(w)}finally{u.f()}};for(t.s();!(e=t.n()).done;)c()}catch(d){t.e(d)}finally{t.f()}var u=n.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,l.Z)((0,l.Z)({},e),{},(0,o.Z)({},n.key,Math.min.apply(Math,(0,s.Z)(t))))}),{});return n.sort((function(e,n){return u[e.key]-u[n.key]}))}),[S,I,i,r]);return{jobs:P,loading:C&&!w}},k=function(e,n){return"".concat(n,"-").concat((0,g.l)(e))},T=(0,d.Ps)(i||(i=(0,r.Z)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),w.$X,p.q)},65864:function(e,n,t){t.d(n,{w:function(){return i}});var i=function(e){var n=new Set,t=new Set;return e.forEach((function(e){n.has(e)?t.add(e):n.add(e)})),t}},71824:function(e,n,t){t.d(n,{N:function(){return u}});var i=t(19065),r=t(325),o=t(52848),a=t(76314),s=t(33902),l=function(e){return Array.isArray(e)?e:[]},c=function(e,n){return"".concat(e,":dagit.").concat(n)},u=function(e,n,t){var u=r.useContext(o.I).basePath,d=c(u,e),f=(0,a.U)(d,l),h=(0,i.Z)(f,1)[0],p=c(u,n),m=(0,a.U)(p,l),x=(0,i.Z)(m,2),g=x[0],v=x[1],y=null!==window.localStorage.getItem(d)&&null===window.localStorage.getItem(p);r.useEffect((function(){y&&v((function(){return t.filter((function(e){return!h.includes(e)}))}))}));var w=r.useCallback((function(e){var n=(0,s.l)(e);v((function(e){var t=new Set(e||[]);return t.has(n)?t.delete(n):t.add(n),Array.from(t)}))}),[v]),j=r.useCallback((function(e){v((function(n){var i=new Set(n||[]);return t.forEach((function(n){e?i.delete(n):i.add(n)})),Array.from(i)}))}),[t,v]),b=r.useMemo((function(){var e=new Set(g);return t.filter((function(n){return!e.has(n)}))}),[t,g]);return r.useMemo((function(){return{expandedKeys:b,onToggle:w,onToggleAll:j}}),[b,w,j])}}}]);
//# sourceMappingURL=839.9986c569.chunk.js.map