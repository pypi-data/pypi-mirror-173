(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8867],{66757:function(n,e,t){"use strict";var r=t(19319),o=t(94178),i=t(67240),c="localStorage"in t.g&&t.g.localStorage?t.g.localStorage:r;function a(n,e){return 1===arguments.length?u(n):s(n,e)}function u(n){const e=c.getItem(n);return o(e)}function s(n,e){try{return c.setItem(n,JSON.stringify(e)),!0}catch(t){return!1}}a.set=s,a.get=u,a.remove=function(n){return c.removeItem(n)},a.clear=function(){return c.clear()},a.backend=function(n){return n&&(c=n),c},a.on=i.on,a.off=i.off,n.exports=a},94178:function(n){"use strict";n.exports=function(n){const e=function(n){try{return JSON.parse(n)}catch(e){return n}}(n);return void 0===e?null:e}},19319:function(n){"use strict";var e={};n.exports={getItem:function(n){return n in e?e[n]:null},setItem:function(n,t){return e[n]=t,!0},removeItem:function(n){return!!(n in e)&&delete e[n]},clear:function(){return e={},!0}}},67240:function(n,e,t){"use strict";var r=t(94178),o={};function i(n){n||(n=t.g.event);var e=o[n.key];e&&e.forEach((function(e){e(r(n.newValue),r(n.oldValue),n.url||n.uri)}))}n.exports={on:function(n,e){o[n]?o[n].push(e):o[n]=[e],t.g.addEventListener?t.g.addEventListener("storage",i,!1):t.g.attachEvent?t.g.attachEvent("onstorage",i):t.g.onstorage=i},off:function(n,e){var t=o[n];t.length>1?t.splice(t.indexOf(e),1):o[n]=[]}}},65597:function(n,e,t){"use strict";t.d(e,{c:function(){return u},f:function(){return s}});var r=t(46313),o=t(23831),i=t(49125),c=t(73942),a=t(37391),u=r.default.div.withConfig({displayName:"Tablestyle__TableContainerStyle",componentId:"sc-8ammqd-0"})(["position:relative;overflow:auto;"," ",""],a.w5,(function(n){return n.minHeight&&"\n    min-height: ".concat(n.minHeight,"px;\n  ")})),s=r.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-1"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;"," "," "," ",""],58*i.iI,c.TR,2*i.iI,(function(n){return"\n    box-shadow: ".concat((n.theme.shadow||o.Z.shadow).popup,";\n    background-color: ").concat((n.theme.interactive||o.Z.interactive).defaultBackground,";\n  ")}),(function(n){return n.leftOffset&&"\n    left: ".concat(n.leftOffset,"px;\n  ")}),(function(n){return n.topOffset&&"\n    top: ".concat(n.topOffset,"px;\n  ")}),(function(n){return n.width&&"\n    width: ".concat(n.width,"px;\n  ")}))},17903:function(n,e,t){"use strict";t.d(e,{Z:function(){return j}});var r=t(82394),o=t(12691),i=t.n(o),c=t(82684),a=t(10919),u=t(19711),s=t(46313),l=t(23831),d=t(49125),f=s.default.table.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1wzfyed-0"})(["contain:size;width:100%;"]),p=s.default.tr.withConfig({displayName:"indexstyle__TableRowStyle",componentId:"sc-1wzfyed-1"})(["",""],(function(n){return!n.noHover&&"\n    &:hover {\n      background: ".concat((n.theme.interactive||l.Z.interactive).rowHoverBackground,";\n      cursor: pointer;\n    }\n  ")})),m=(0,s.css)(["text-overflow:ellipsis;white-space:nowrap;"," "," "," "," "," ",""],(function(n){return!n.alignTop&&"\n    vertical-align: middle;\n  "}),(function(n){return n.alignTop&&"\n    vertical-align: top;\n  "}),(function(n){return!n.noBorder&&"\n    border-bottom: 1px solid ".concat((n.theme.borders||l.Z.borders).light,";\n  ")}),(function(n){return n.compact&&"\n    padding: ".concat(d.iI/2,"px ").concat(d.iI,"px;\n  ")}),(function(n){return!n.compact&&"\n    padding: ".concat(d.iI,"px ").concat(2*d.iI,"px;\n  ")}),(function(n){return n.maxWidth&&"\n    max-width: ".concat(n.maxWidth,";\n  ")})),h=s.default.th.withConfig({displayName:"indexstyle__TableHeadStyle",componentId:"sc-1wzfyed-2"})(["",""],m),g=s.default.td.withConfig({displayName:"indexstyle__TableDataStyle",componentId:"sc-1wzfyed-3"})([""," ",""],m,(function(n){return n.selected&&"\n    background-color: ".concat((n.theme.interactive||l.Z.interactive).activeBorder,";\n  ")})),v=t(28598);function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var j=function(n){var e=n.alignTop,t=n.buildLinkProps,r=n.columnFlex,o=n.columnMaxWidth,s=n.columns,l=void 0===s?[]:s,d=n.compact,m=n.isSelectedRow,b=n.noBorder,j=n.onClickRow,w=n.rows,y=n.uuid,O=(0,c.useMemo)((function(){return r.reduce((function(n,e){return n+(e||0)}),0)}),r),Z=(0,c.useCallback)((function(n){if(r[n]){var e=Math.round(r[n]/O*100);return"".concat(e,"%")}return null}),[]),P=(0,c.useMemo)((function(){return null===w||void 0===w?void 0:w.map((function(n,r){var c=null===t||void 0===t?void 0:t(r),u=n.map((function(n,t){return(0,v.jsx)(g,{alignTop:e,compact:d,maxWidth:null===o||void 0===o?void 0:o(t),noBorder:b,selected:null===m||void 0===m?void 0:m(r),width:Z(t),children:n},"".concat(y,"-row-").concat(r,"-cell-").concat(t))})),s=(0,v.jsx)(p,{noHover:!(c||j),onClick:j?function(){return j(r)}:null,children:u},"".concat(y,"-row-").concat(r));return c?(0,v.jsx)(i(),x(x({},c),{},{passHref:!0,children:(0,v.jsx)(a.Z,{fullWidth:!0,noHoverUnderline:!0,noOutline:!0,style:{display:"table-row-group"},verticalAlignContent:!0,children:s})})):s}))}),[e,t,Z,o,l,d,m,b,j,w]);return(0,v.jsxs)(f,{children:[(null===l||void 0===l?void 0:l.length)>=1&&(0,v.jsx)(p,{noHover:!0,children:l.map((function(n,e){return(0,v.jsx)(h,{compact:d,noBorder:b,children:(0,v.jsx)(u.ZP,{bold:!0,leftAligned:!0,monospace:!0,muted:!0,children:n.label?n.label():n.uuid})},"".concat(y,"-col-").concat(n.uuid,"-").concat(e))}))}),P]})}},82944:function(n,e,t){"use strict";var r=t(82394),o=t(91835),i=t(82684),c=t(46313),a=t(69898),u=t(28598);function s(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var d=c.default.input.withConfig({displayName:"TextInput__TextInputStyle",componentId:"sc-1ii4qtc-0"})(["",""],a.p),f=function(n,e){var t=(0,o.Z)({},n);return(0,u.jsx)(a.Z,l(l({},t),{},{input:(0,u.jsx)(d,l({},t)),ref:e}))};e.Z=i.forwardRef(f)},73892:function(n,e,t){"use strict";t.r(e);var r=t(12757),o=t(82684),i=t(83455),c=t(60328),a=t(51404),u=t(67971),s=t(87372),l=t(31866),d=t(86673),f=t(17903),p=t(19711),m=t(82944),h=t(41374),g=t(10503),v=t(73899),b=t(73942),x=t(99994),j=t(49125),w=t(72454),y=t(5679),O=t(96510),Z=t(47999),P=t(62084),k=t(65597),I=t(28598);function C(n){var e=n.fetchInstances,t=n.instance,a=(0,o.useRef)(null),s=(0,o.useState)(),l=s[0],f=s[1],m=(0,o.useState)(),v=m[0],b=m[1],x=t.name,w=t.task_arn,y={};w&&(y.task_arn=w);var C=(0,i.Db)(h.ZP.instances.clusters.useUpdate("ecs",x),{onSuccess:function(n){return(0,O.wD)(n,{callback:function(){e(),f(!1)},onErrorCallback:function(n){var e=n.error,t=e.errors,r=e.message;console.log(t,r)}})}}),_=(0,r.Z)(C,1)[0],S=(0,i.Db)(h.ZP.instances.clusters.useDelete("ecs",x,y),{onSuccess:function(n){return(0,O.wD)(n,{callback:function(){e(),f(!1)},onErrorCallback:function(n){var e=n.error,t=e.errors,r=e.message;console.log(t,r)}})}}),N=(0,r.Z)(S,1)[0],E=(0,o.useMemo)((function(){var n=t.status,e=[{label:function(){return(0,I.jsx)(p.ZP,{children:"Delete instance"})},onClick:function(){return b(!0)},uuid:"delete_instance"}];return"STOPPED"===n?e.unshift({label:function(){return(0,I.jsx)(p.ZP,{children:"Resume instance"})},onClick:function(){return _({instance:{action:"resume",name:t.name,task_arn:t.task_arn}})},uuid:"resume_instance"}):"RUNNING"===n&&e.unshift({label:function(){return(0,I.jsx)(p.ZP,{children:"Stop instance"})},onClick:function(){return _({instance:{action:"stop",name:t.name,task_arn:t.task_arn}})},uuid:"stop_instance"}),e}),[t]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{ref:a,style:{position:"relative",zIndex:"1"},children:[(0,I.jsx)(c.Z,{iconOnly:!0,onClick:function(){return f(!l)},children:(0,I.jsx)(g.mH,{size:2*j.iI})}),(0,I.jsx)(Z.Z,{disableEscape:!0,onClickOutside:function(){f(!1),b(!1)},open:l,children:v?(0,I.jsxs)(k.f,{leftOffset:30*-j.iI,topOffset:3*-j.iI,width:30*j.iI,children:[(0,I.jsx)(p.ZP,{children:"Are you sure you want to delete"}),(0,I.jsx)(p.ZP,{children:"this instance? You may not be"}),(0,I.jsx)(p.ZP,{children:"able to recover your data."}),(0,I.jsx)(d.Z,{mt:1}),(0,I.jsxs)(u.Z,{children:[(0,I.jsx)(c.Z,{danger:!0,onClick:N,children:"Confirm"}),(0,I.jsx)(d.Z,{ml:1}),(0,I.jsx)(c.Z,{default:!0,onClick:function(){return b(!1)},children:"Cancel"})]})]}):(0,I.jsx)(P.Z,{items:E,left:25*-j.iI,open:l,parentRef:a,topOffset:3*-j.iI,uuid:"Manage/more_actions",width:25*j.iI})})]})})}e.default=function(){var n=(0,o.useState)(),e=n[0],t=n[1],Z=(0,o.useState)(),P=Z[0],k=Z[1],_=h.ZP.instances.clusters.list("ecs",{},{refreshInterval:3e3,revalidateOnFocus:!0}),S=_.data,N=_.mutate,E=(0,i.Db)(h.ZP.instances.clusters.useCreate("ecs"),{onSuccess:function(n){return(0,O.wD)(n,{callback:function(){N(),t(!1)},onErrorCallback:function(n){var e=n.error,t=e.errors,r=e.message;console.log(t,r)}})}}),D=(0,r.Z)(E,2),T=D[0],R=D[1].isLoading,M=(0,o.useMemo)((function(){var n;return null===S||void 0===S||null===(n=S.instances)||void 0===n?void 0:n.filter((function(n){return n.name}))}),[S]);return(0,I.jsx)(a.Z,{afterWidth:w.k1,beforeWidth:w.k1,breadcrumbs:[{bold:!0,label:function(){return"Manage"}}],navigationItems:[],subheaderChildren:(0,I.jsx)(I.Fragment,{children:e?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(s.Z,{default:!0,level:5,monospace:!0,children:"Configure new instance"}),(0,I.jsx)(f.Z,{columnFlex:[null,3],rows:[[(0,I.jsx)(p.ZP,{bold:!0,color:v.cM,children:"Instance name"}),(0,I.jsx)(m.Z,{label:"Spaces will be replaced by underscores",monospace:!0,onChange:function(n){n.preventDefault(),k(n.target.value)},placeholder:"Name your new instance",value:P})]]}),(0,I.jsx)(d.Z,{my:2,children:(0,I.jsxs)(u.Z,{children:[(0,I.jsx)(l.ZP,{background:v.a$,bold:!0,inline:!0,loading:R,onClick:function(){return T({instance:{name:(0,y.RA)(P)}})},uuid:"EnvironmentListPage/new",children:"Create"}),(0,I.jsx)(d.Z,{ml:1}),(0,I.jsx)(l.ZP,{bold:!0,inline:!0,onClick:function(){return t(!1)},uuid:"EnvironmentListPage/cancel",children:"Cancel"})]})})]}):(0,I.jsx)(l.ZP,{background:x.eW,beforeElement:(0,I.jsx)(g.mm,{size:2.5*j.iI}),bold:!0,inline:!0,onClick:function(){k((0,y.Y6)()),t(!0)},uuid:"EnvironmentListPage/new_instance",children:"Create new instance"})}),title:"Manage",uuid:"Manage/index",children:(0,I.jsx)(f.Z,{columns:[{uuid:"Status"},{uuid:"Instance Name"},{uuid:"Type"},{uuid:"Public IP address"},{uuid:"Open"},{label:function(){return""},uuid:"Actions"}],columnFlex:[2,4,2,3,1,null],rows:null===M||void 0===M?void 0:M.map((function(n){var e=n.ip,t=n.name,r=n.status,o=n.type;return[(0,I.jsx)(c.Z,{borderRadius:b.D7,danger:"STOPPED"===r,default:"PROVISIONING"===r,notClickable:!0,padding:"6px",primary:"RUNNING"===r,warning:"PENDING"===r,children:(0,y.vg)(r)}),(0,I.jsx)(p.ZP,{children:t}),(0,I.jsx)(p.ZP,{children:(0,y.vg)(o)}),(0,I.jsx)(p.ZP,{children:e}),(0,I.jsx)(c.Z,{iconOnly:!0,onClick:function(){return window.open("http://".concat(e,":6789"))},children:(0,I.jsx)(g.M0,{size:2*j.iI})}),(0,I.jsx)(C,{fetchInstances:N,instance:n})]}))})})}},13157:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return t(73892)}])}},function(n){n.O(0,[4259,2740,2874,1374,6182,1404,7197,9774,2888,179],(function(){return e=13157,n(n.s=e);var e}));var e=n.O();_N_E=e}]);