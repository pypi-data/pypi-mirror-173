{"version":3,"file":"lib_index_js.092c15d8771395a9e89a.js","mappings":";;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,mBAAO,CAAC,wFAAyB;AACvD,sBAAsB,mBAAO,CAAC,wFAAyB;AACvD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,mBAAmB,mBAAO,CAAC,kFAAsB;AACjD,wBAAwB,mBAAO,CAAC,4FAA2B;AAC3D,gBAAgB,mBAAO,CAAC,+BAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,aAAa;AAC5D;AACA;AACA,oEAAoE,aAAa;AACjF,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,kBAAe;;;;;;;;;;;AC9CF;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB","sources":["webpack://jupyterlab_copy_relative_path/./lib/index.js","webpack://jupyterlab_copy_relative_path/./lib/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst application_1 = require(\"@jupyterlab/application\");\nconst filebrowser_1 = require(\"@jupyterlab/filebrowser\");\nconst docmanager_1 = require(\"@jupyterlab/docmanager\");\nconst apputils_1 = require(\"@jupyterlab/apputils\");\nconst ui_components_1 = require(\"@jupyterlab/ui-components\");\nconst utils_1 = require(\"./utils\");\nconst extension = {\n    id: 'context-menu',\n    autoStart: true,\n    requires: [filebrowser_1.IFileBrowserFactory, docmanager_1.IDocumentManager, application_1.ILabShell],\n    activate: (app, factory, docManager, labShell) => {\n        app.commands.addCommand('filebrowser:copy-relative-path', {\n            label: 'Copy Relative Path',\n            caption: 'Copy path relative to the active notebook.',\n            icon: ui_components_1.fileIcon.bindprops({ stylesheet: 'menuItem' }),\n            execute: () => {\n                const widget = factory.tracker.currentWidget;\n                if (!widget) {\n                    return;\n                }\n                const item = widget.selectedItems().next();\n                if (!item) {\n                    return;\n                }\n                if (!labShell.currentWidget) {\n                    return;\n                }\n                console.debug('labShell.currentWidget:', labShell.currentWidget);\n                const context = docManager.contextForWidget(labShell.currentWidget);\n                if (!context) {\n                    return;\n                }\n                console.debug(`context.path: ${context.path}`);\n                const relativePath = utils_1.getRelativePath(item.path, context.path);\n                apputils_1.Clipboard.copyToSystem(relativePath);\n                console.debug(`Copied relative path to clipboard: ${relativePath}`);\n            },\n            isVisible: () => !!factory.tracker.currentWidget &&\n                !!factory.tracker.currentWidget.selectedItems().next() &&\n                !!labShell.currentWidget &&\n                !!docManager.contextForWidget(labShell.currentWidget),\n        });\n    },\n};\nexports.default = extension;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRelativePath = void 0;\n// Get relative path of target with respect to reference\nconst getRelativePath = (target, reference) => {\n    const xs = target.split('/');\n    const ys = reference.split('/').slice(0, -1);\n    const n = Math.min(xs.length, ys.length);\n    let count = 0;\n    for (let i = 0; i < n; i++) {\n        if (xs[i] === ys[i]) {\n            count++;\n        }\n        else {\n            break;\n        }\n    }\n    const numUps = ys.length - count;\n    const zs = [...Array(numUps).fill('..'), ...xs.slice(count)];\n    return zs.join('/');\n};\nexports.getRelativePath = getRelativePath;\n"],"names":[],"sourceRoot":""}